<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>WhatsApp Representative Agent - Dashboard</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="/styles_mobile.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:wght@600;700;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/styles_shop.css">
    <link rel="stylesheet" href="/styles_new.css">
    <link rel="stylesheet" href="/styles_analytics.css">
    <!-- intl-tel-input plugin -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@19.5.6/build/css/intlTelInput.css">
    <!-- Chart.js for Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Animated Background -->
        <div class="animated-bg">
            <div class="orb orb-1"></div>
            <div class="orb orb-2"></div>
            <div class="orb orb-3"></div>
        </div>

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                        <circle cx="20" cy="20" r="18" fill="url(#logo-gradient)" />
                        <path
                            d="M20 10C14.48 10 10 14.48 10 20C10 21.82 10.5 23.52 11.36 25L10 30L15.18 28.66C16.6 29.44 18.25 29.9 20 29.9C25.52 29.9 30 25.42 30 19.9C30 14.38 25.52 10 20 10Z"
                            fill="white" />
                        <defs>
                            <linearGradient id="logo-gradient" x1="0" y1="0" x2="40" y2="40">
                                <stop offset="0%" stop-color="#3B82F6" />
                                <stop offset="100%" stop-color="#8b5cf6" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <div class="logo-text">
                        <h1>Representative</h1>
                        <p>AI Agent</p>
                    </div>
                </div>
                <!-- Theme Toggle -->
                <button id="theme-toggle" class="theme-toggle" aria-label="Toggle Theme">
                    <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z" />
                    </svg>
                    <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                        style="display: none;">
                        <path
                            d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,18.55,13.59,21.5,9,21.5 c-5.52,0-10-4.48-10-10C-1,6.91,1.95,3.05,5.51,1.51C5.51,1.51,5.51,1.51,5.51,1.51C5.63,2.71,6.95,4.04,9.37,5.51z M17,2 c0,1.94,2.16,3,1.35,5.17C20.84,5.84,23,3.94,23,2C23,2,17,2,17,2z" />
                    </svg>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path
                            d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                    </svg>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-page="chats">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z" />
                        <path
                            d="M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z" />
                    </svg>
                    <span>Chats</span>
                    <span class="badge" id="chat-count">0</span>
                </a>
                <a href="#" class="nav-item" data-page="contacts">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path
                            d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" />
                    </svg>
                    <span>Contacts</span>
                </a>
                <a href="#" class="nav-item" data-page="marketing">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path
                            d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zm6-4a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zm6-3a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />
                    </svg>
                    <span>Marketing</span>
                </a>
                <a href="#" class="nav-item" data-page="shops">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" />
                    </svg>
                    <span>Shops</span>
                </a>
                <a href="#" class="nav-item" data-page="communities">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    <span>Communities</span>
                </a>
                <a href="#" class="nav-item" data-page="analytics">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z">
                        </path>
                    </svg>
                    <span>Analytics</span>
                </a>
                <a href="#" class="nav-item" data-page="ai-profile">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M13 7H7v6h6V7z" />
                        <path fill-rule="evenodd"
                            d="M7 2a1 1 0 012 0v1h2V2a1 1 0 112 0v1h2a2 2 0 012 2v2h1a1 1 0 110 2h-1v2h1a1 1 0 110 2h-1v2a2 2 0 01-2 2h-2v1a1 1 0 11-2 0v-1H9v1a1 1 0 11-2 0v-1H5a2 2 0 01-2-2v-2H2a1 1 0 110-2h1V9H2a1 1 0 010-2h1V5a2 2 0 012-2h2V2zM5 5h10v10H5V5z"
                            clip-rule="evenodd" />
                    </svg>
                    <span>AI Profile</span>
                </a>
                <a href="#" class="nav-item" data-page="user-profile">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                            clip-rule="evenodd" />
                    </svg>
                    <span>My Profile</span>
                </a>
                <a href="#" class="nav-item" data-page="settings">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z"
                            clip-rule="evenodd" />
                    </svg>
                    <span>Settings</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="connection-status" id="connection-status">
                    <div class="status-indicator"></div>
                    <div class="status-text">
                        <span class="status-label">Connecting...</span>
                        <span class="status-detail">Initializing</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Analytics Page (first in DOM so it always renders at top when active) -->
            <div class="page" id="analytics-page">
                <div class="analytics-header">
                    <div class="analytics-header-content">
                        <div class="analytics-title-group">
                            <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                                </svg>
                            </button>
                            <h2>üìä WhatsApp Analytics</h2>
                        </div>
                        <div class="analytics-header-actions">
                            <div class="timeframe-selector">
                                <button class="btn-timeframe active" data-timeframe="weekly" onclick="switchTimeframe('weekly')">üìÖ Weekly</button>
                                <button class="btn-timeframe" data-timeframe="monthly" onclick="switchTimeframe('monthly')">üìÜ Monthly</button>
                                <button class="btn-timeframe" data-timeframe="yearly" onclick="switchTimeframe('yearly')">üìä Yearly</button>
                                <button class="btn-timeframe" data-timeframe="all-time" onclick="switchTimeframe('all-time')">üïê All Time</button>
                            </div>
                            <span class="section-badge" id="timeframe-badge">Last 7 days</span>
                            <button class="btn-secondary" onclick="loadAnalytics()">üîÑ Refresh</button>
                        </div>
                    </div>
                </div>
                <div class="analytics-content">
                    <!-- Key Metrics -->
                    <section class="analytics-section">
                        <div class="section-header">
                            <h3>üìà Key Metrics</h3>
                            <span class="section-badge">Real-time</span>
                        </div>
                        <div class="analytics-grid analytics-grid-6">
                            <div class="analytics-card">
                                <div class="card-icon">üí¨</div>
                                <div class="card-content">
                                    <h4>Total Messages</h4>
                                    <div class="value" id="stat-total-messages">-</div>
                                    <small>Inbound + Outbound</small>
                                </div>
                            </div>
                            <div class="analytics-card">
                                <div class="card-icon">üë•</div>
                                <div class="card-content">
                                    <h4>Active Chats</h4>
                                    <div class="value" id="stat-active-chats">-</div>
                                    <small>Unique contacts</small>
                                </div>
                            </div>
                            <div class="analytics-card">
                                <div class="card-icon">‚è±Ô∏è</div>
                                <div class="card-content">
                                    <h4>Avg Response Time</h4>
                                    <div class="value" id="stat-response-time">-</div>
                                    <small>Agent reply speed</small>
                                </div>
                            </div>
                            <div class="analytics-card">
                                <div class="card-icon">üÜï</div>
                                <div class="card-content">
                                    <h4>New Contacts</h4>
                                    <div class="value" id="stat-new-contacts">-</div>
                                    <small>Last 7 days</small>
                                </div>
                            </div>
                            <div class="analytics-card">
                                <div class="card-icon">üì¢</div>
                                <div class="card-content">
                                    <h4>Ad Read Rate</h4>
                                    <div class="value" id="stat-read-rate">-</div>
                                    <small>Campaign engagement</small>
                                </div>
                            </div>
                            <div class="analytics-card">
                                <div class="card-icon">üì¶</div>
                                <div class="card-content">
                                    <h4>Queue Pending</h4>
                                    <div class="value" id="stat-queue-pending">-</div>
                                    <small>Messages awaiting</small>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Message Volume & Peak Hours -->
                    <section class="analytics-section">
                        <div class="section-header">
                            <h3>üìä Message Volume & Activity</h3>
                            <span class="section-badge">Trends</span>
                        </div>
                        <div class="charts-row">
                            <div class="chart-container">
                                <div class="chart-header">
                                    <h4>Daily Message Volume</h4>
                                    <span class="chart-info">Messages per day (last 7 days)</span>
                                </div>
                                <canvas id="volumeChart"></canvas>
                            </div>
                            <div class="chart-container">
                                <div class="chart-header">
                                    <h4>Peak Activity Hours</h4>
                                    <span class="chart-info">When your contacts are most active (UTC)</span>
                                </div>
                                <canvas id="peakHoursChart"></canvas>
                            </div>
                        </div>
                    </section>

                    <!-- Message Mix & Engagement -->
                    <section class="analytics-section">
                        <div class="section-header">
                            <h3>üéØ Message Mix & Engagement</h3>
                        </div>
                        <div class="charts-row charts-row-3">
                            <div class="chart-container">
                                <div class="chart-header">
                                    <h4>Message Types</h4>
                                    <span class="chart-info">Text, image, voice, etc.</span>
                                </div>
                                <canvas id="messageTypesChart"></canvas>
                            </div>
                            <div class="chart-container">
                                <div class="chart-header">
                                    <h4>Inbound vs Outbound</h4>
                                    <span class="chart-info">User vs Agent messages</span>
                                </div>
                                <canvas id="inboundOutboundChart"></canvas>
                            </div>
                            <div class="chart-container">
                                <div class="chart-header">
                                    <h4>Ad Engagement Funnel</h4>
                                    <span class="chart-info">Delivered ‚Üí Read ‚Üí Replied</span>
                                </div>
                                <canvas id="engagementChart"></canvas>
                            </div>
                        </div>
                    </section>

                    <!-- Top Performers -->
                    <section class="analytics-section">
                        <div class="section-header">
                            <h3>üèÜ Top Performers</h3>
                            <span class="section-badge">By volume</span>
                        </div>
                        <div class="top-performers-grid">
                            <div class="table-container flex-1" id="contacts-table-container">
                                <h4 class="table-title">Most Active Contacts</h4>
                                <div class="table-wrapper" id="contacts-table-wrapper" style="display: none;">
                                    <table class="analytics-table">
                                        <thead>
                                            <tr>
                                                <th>Contact</th>
                                                <th>Msgs</th>
                                            </tr>
                                        </thead>
                                        <tbody id="top-contacts-body"></tbody>
                                    </table>
                                </div>
                                <div class="empty-state" id="top-contacts-empty">
                                    <div class="empty-icon">üí¨</div>
                                    <p>No message data yet</p>
                                    <small>Chats will appear as conversations happen</small>
                                </div>
                            </div>
                            <div class="table-container flex-1" id="groups-table-container">
                                <h4 class="table-title">Top Groups</h4>
                                <div class="table-wrapper" id="groups-table-wrapper" style="display: none;">
                                    <table class="analytics-table">
                                        <thead>
                                            <tr>
                                                <th>Group</th>
                                                <th>Members</th>
                                                <th>Admins</th>
                                                <th>Age</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody id="top-groups-body"></tbody>
                                    </table>
                                </div>
                                <div class="empty-state" id="groups-empty">
                                    <div class="empty-icon">üë•</div>
                                    <p>No groups found</p>
                                    <small>Add the bot to WhatsApp groups to see analytics</small>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Campaign Performance -->
                    <section class="analytics-section">
                        <div class="section-header">
                            <h3>üì£ Campaign Performance</h3>
                            <span class="section-badge">Marketing</span>
                        </div>
                        <div class="chart-container" style="min-height: 400px;">
                            <div class="chart-header">
                                <h4>Top Campaigns by Reads & Replies</h4>
                                <span class="chart-info">Compare campaign effectiveness</span>
                            </div>
                            <div style="flex: 1; min-height: 300px; position: relative;">
                                <canvas id="campaignChart"></canvas>
                            </div>
                            <div class="empty-state" id="campaigns-empty" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
                                <div class="empty-icon">üì≠</div>
                                <p>No campaign data yet</p>
                                <small>Start a marketing campaign to see performance metrics</small>
                            </div>
                        </div>
                    </section>

                    <!-- Insights -->
                    <section class="analytics-section">
                        <div class="section-header">
                            <h3>üí° Insights & Recommendations</h3>
                            <span class="section-badge">AI-driven</span>
                        </div>
                        <div class="insights-container" id="insights-container">
                            <div class="insight-card">
                                <span class="insight-icon">üìà</span>
                                <p id="insight-volume">Loading...</p>
                            </div>
                            <div class="insight-card">
                                <span class="insight-icon">‚è∞</span>
                                <p id="insight-peak">Loading...</p>
                            </div>
                            <div class="insight-card">
                                <span class="insight-icon">üéØ</span>
                                <p id="insight-engagement">Loading...</p>
                            </div>
                        </div>
                    </section>
                </div>
            </div>

            <!-- Dashboard Page -->
            <div class="page active" id="dashboard-page">
                <header class="page-header">
                    <h2>Dashboard</h2>
                    <button class="btn-refresh" id="refresh-btn">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                                clip-rule="evenodd" />
                        </svg>
                    </button>
                </header>

                <!-- QR Code Section -->
                <div class="qr-section" id="qr-section" style="display: none;">
                    <div class="qr-card">
                        <div class="qr-header">
                            <h3>Scan QR Code to Connect</h3>
                            <p>Open WhatsApp on your phone and scan this code</p>
                        </div>
                        <div class="qr-code-container" id="qr-code">
                            <div class="qr-loader">
                                <div class="spinner"></div>
                                <p>Generating QR Code...</p>
                            </div>
                        </div>
                        <div class="quick-actions-row">
                            <button class="action-card-btn" onclick="openSimpleCampaignModal()">
                                <div class="action-icon">üöÄ</div>
                                <span class="action-title">Create Campaign</span>
                                <span class="action-desc">Launch automated marketing</span>
                            </button>
                            <button class="action-card-btn" onclick="switchMiniTab('audience')">
                                <div class="action-icon">üë•</div>
                                <span class="action-title">Manage Groups</span>
                                <span class="action-desc">Select target audience</span>
                            </button>
                            <button class="action-card-btn" onclick="switchMiniTab('settings')">
                                <div class="action-icon">‚öôÔ∏è</div>
                                <span class="action-title">Brand Profile</span>
                                <span class="action-desc">Update identity</span>
                            </button>
                        </div>
                        <div class="qr-instructions">
                            <div class="instruction-step">
                                <span class="step-number">1</span>
                                <p>Open WhatsApp on your phone</p>
                            </div>
                            <div class="instruction-step">
                                <span class="step-number">2</span>
                                <p>Tap Menu or Settings and select Linked Devices</p>
                            </div>
                            <div class="instruction-step">
                                <span class="step-number">3</span>
                                <p>Tap on Link a Device</p>
                            </div>
                            <div class="instruction-step">
                                <span class="step-number">4</span>
                                <p>Point your phone at this screen to scan the code</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid" id="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #3B82F6 0%, #8b5cf6 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                <path
                                    d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Total Messages</p>
                            <h3 class="stat-value" id="total-messages">0</h3>
                            <span class="stat-change positive">+12% from last week</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #ec4899 0%, #f59e0b 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                <path
                                    d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Active Contacts</p>
                            <h3 class="stat-value" id="active-contacts">0</h3>
                            <span class="stat-change positive">+5 new this week</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #06b6d4 0%, #3B82F6 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Response Rate</p>
                            <h3 class="stat-value">98%</h3>
                            <span class="stat-change positive">Excellent</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #10b981 0%, #06b6d4 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Avg Response Time</p>
                            <h3 class="stat-value">12s</h3>
                            <span class="stat-change positive">-3s improvement</span>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="activity-section">
                    <h3>Recent Activity</h3>
                    <div class="activity-list" id="activity-list">
                        <div class="activity-empty">
                            <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                                <circle cx="32" cy="32" r="32" fill="#f3f4f6" />
                                <path d="M32 20v24M20 32h24" stroke="#9ca3af" stroke-width="2" stroke-linecap="round" />
                            </svg>
                            <p>No recent activity</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chats Page -->
            <div class="page page-chats" id="chats-page">
                <header class="page-header chats-header">
                    <div class="chats-header-left">
                        <button class="btn-refresh btn-back" onclick="switchPage('dashboard')" aria-label="Back to Home">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                        </button>
                        <h2>Conversations</h2>
                    </div>
                    <div class="chats-toolbar">
                        <div class="search-box chat-search-wrap">
                            <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                <path fill-rule="evenodd"
                                    d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                    clip-rule="evenodd" />
                            </svg>
                            <input type="text" placeholder="Search conversations‚Ä¶" id="chat-search" autocomplete="off">
                        </div>
                        <button class="btn-refresh btn-refresh-chats" id="refresh-chats-btn" aria-label="Refresh Chats">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                                    clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </header>

                <div class="chats-container">
                    <aside class="chat-list-wrap">
                        <div class="chat-list" id="chat-list">
                            <div class="chat-empty" aria-live="polite">
                                <div class="chat-empty-icon">
                                    <svg width="56" height="56" viewBox="0 0 56 56" fill="none" aria-hidden="true">
                                        <path d="M18 24h20M18 32h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-opacity="0.5"/>
                                    </svg>
                                </div>
                                <p class="chat-empty-title">No conversations yet</p>
                                <p class="chat-empty-hint">New chats will appear here</p>
                            </div>
                        </div>
                    </aside>
                    <main class="chat-detail" id="chat-detail" aria-live="polite">
                        <div class="chat-detail-empty">
                            <div class="chat-detail-empty-icon">
                                <svg width="72" height="72" viewBox="0 0 72 72" fill="none" aria-hidden="true">
                                    <path d="M26 30h20M26 40h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-opacity="0.5"/>
                                </svg>
                            </div>
                            <h3 class="chat-detail-empty-title">Select a conversation</h3>
                            <p class="chat-detail-empty-hint">Choose a chat from the list to view messages</p>
        </div>
        </main>

        <!-- Disconnected / Getting Started Overlay -->
        <div id="onboarding-overlay" class="onboarding-overlay" style="display: none;">
            <div class="onboarding-card">
                <div class="onboarding-header">
                    <div class="onboarding-icon">üí°</div>
                    <div>
                        <div class="onboarding-title">Get your WhatsApp Business connected</div>
                        <div class="onboarding-subtitle">A quick 3‚Äëstep guide before you scan the QR code.</div>
                    </div>
                </div>

                <div class="onboarding-steps">
                    <div class="onboarding-step">
                        <span class="onboarding-step-number">1</span>
                        <p class="onboarding-step-text">
                            If you haven‚Äôt already, create a <strong>WhatsApp Business</strong> account on your phone
                            (recommended) or use your existing one.
                        </p>
                    </div>
                    <div class="onboarding-step">
                        <span class="onboarding-step-number">2</span>
                        <p class="onboarding-step-text">
                            On another device (laptop or desktop), open this dashboard link in a browser so you can see
                            the QR code screen comfortably.
                        </p>
                    </div>
                    <div class="onboarding-step">
                        <span class="onboarding-step-number">3</span>
                        <p class="onboarding-step-text">
                            On your phone, open <strong>WhatsApp Business &gt; Linked Devices</strong>, tap
                            <strong>Link a Device</strong>, then point your camera at the QR code that appears here.
                        </p>
                    </div>
                </div>

                <div class="onboarding-footer">
                    <p class="onboarding-note">
                        Once you‚Äôre connected, this guide disappears and your live WhatsApp analytics, chats, and
                        campaigns will start updating automatically.
                    </p>
                    <div class="onboarding-actions">
                        <button class="onboarding-primary" onclick="window.handleGetStarted()">
                            Get started
                            <span style="font-size: 1rem;">‚Üí</span>
                        </button>
                        <button class="onboarding-secondary" onclick="window.handleGetStarted()">
                            Skip and go to QR
                        </button>
                    </div>
                </div>
            </div>
        </div>
                </div>
            </div>

            <!-- Contacts Page -->
            <div class="page" id="contacts-page">
                <header class="page-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                        </button>
                        <h2>Contacts</h2>
                    </div>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <div class="search-box">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                    clip-rule="evenodd" />
                            </svg>
                            <input type="text" placeholder="Search contacts..." id="contact-search">
                        </div>
                        <button class="btn-refresh" id="refresh-contacts-btn" aria-label="Refresh Contacts">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                                    clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </header>

                <div class="contacts-grid" id="contacts-grid">
                    <div class="contacts-empty">
                        <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                            <circle cx="32" cy="32" r="32" fill="#f3f4f6" />
                            <circle cx="32" cy="26" r="8" stroke="#9ca3af" stroke-width="2" />
                            <path d="M20 50c0-6.627 5.373-12 12-12s12 5.373 12 12" stroke="#9ca3af" stroke-width="2"
                                stroke-linecap="round" />
                        </svg>
                        <p>No contacts yet</p>
                    </div>
                </div>
            </div>

            <!-- Communities Page -->
            <div class="page" id="communities-page">
                <header class="page-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                        </button>
                        <h2>Communities</h2>
                    </div>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <div class="search-box">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                    clip-rule="evenodd" />
                            </svg>
                            <input type="text" placeholder="Search groups..." id="communities-search"
                                onkeyup="filterCommunities()">
                        </div>
                        <button class="btn-refresh" onclick="loadCommunities()" aria-label="Refresh Communities">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                                    clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </header>

                <div class="stats-grid">
                    <div class="stat-card">
                        <p class="stat-label">Total Groups</p>
                        <h3 class="stat-value" id="comm-total-count">0</h3>
                    </div>
                    <div class="stat-card">
                        <p class="stat-label">Total Reach</p>
                        <h3 class="stat-value" id="comm-total-reach">0</h3>
                        <span class="stat-change positive">Potential Audience</span>
                    </div>
                </div>

                <div class="marketing-list-section">
                    <div id="communities-list" class="marketing-list">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div class="page" id="settings-page">
                <header class="page-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                        </button>
                        <h2>‚öôÔ∏è Settings</h2>
                    </div>
                </header>

                <div class="settings-container">
                    <!-- Appearance Section -->
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <div class="settings-icon"
                                style="background: linear-gradient(135deg, #3B82F6 0%, #8b5cf6 100%);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" />
                                </svg>
                            </div>
                            <div>
                                <h3>Appearance</h3>
                                <p>Customize how the app looks</p>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6;">
                                        <path
                                            d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8z" />
                                    </svg>
                                    <div>
                                        <label>Theme Mode</label>
                                        <p>Switch between light and dark theme</p>
                                    </div>
                                </div>
                            </div>
                            <button id="mobile-theme-toggle" class="theme-toggle-btn">
                                <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z" />
                                </svg>
                                <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                    style="display: none;">
                                    <path
                                        d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,18.55,13.59,21.5,9,21.5 c-5.52,0-10-4.48-10-10C-1,6.91,1.95,3.05,5.51,1.51C5.51,1.51,5.51,1.51,5.51,1.51C5.63,2.71,6.95,4.04,9.37,5.51z M17,2 c0,1.94,2.16,3,1.35,5.17C20.84,5.84,23,3.94,23,2C23,2,17,2,17,2z" />
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Connection Section -->
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <div class="settings-icon"
                                style="background: linear-gradient(135deg, #06b6d4 0%, #3B82F6 100%);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z" />
                                </svg>
                            </div>
                            <div>
                                <h3>Connection</h3>
                                <p>WhatsApp connection details</p>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6;">
                                        <path
                                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                                    </svg>
                                    <div>
                                        <label>WhatsApp Status</label>
                                        <p>Current connection status</p>
                                    </div>
                                </div>
                            </div>
                            <span class="setting-badge" id="settings-status">Checking...</span>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6;">
                                        <path
                                            d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z" />
                                    </svg>
                                    <div>
                                        <label>Phone Number</label>
                                        <p>Connected WhatsApp number</p>
                                    </div>
                                </div>
                            </div>
                            <span class="setting-badge" id="settings-phone">Not connected</span>
                        </div>
                    </div>

                    <!-- Notifications Section -->
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <div class="settings-icon"
                                style="background: linear-gradient(135deg, #ec4899 0%, #f59e0b 100%);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z" />
                                </svg>
                            </div>
                            <div>
                                <h3>Notifications</h3>
                                <p>Manage notification preferences</p>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6;">
                                        <path
                                            d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z" />
                                    </svg>
                                    <div>
                                        <label>Desktop Notifications</label>
                                        <p>Get notified of new messages</p>
                                    </div>
                                </div>
                            </div>
                            <label class="toggle">
                                <input type="checkbox" id="desktop-notifications">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6;">
                                        <path
                                            d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
                                    </svg>
                                    <div>
                                        <label>Sound Alerts</label>
                                        <p>Play sound for new messages</p>
                                    </div>
                                </div>
                            </div>
                            <label class="toggle">
                                <input type="checkbox" id="sound-alerts">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>


                    <!-- System Configuration Section -->
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <div class="settings-icon"
                                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" />
                                </svg>
                            </div>
                            <div>
                                <h3>System Configuration</h3>
                                <p>Advanced system settings</p>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6;">
                                        <path
                                            d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" />
                                    </svg>
                                    <div>
                                        <label>Batch Buffer Window (ms)</label>
                                        <p>Wait time before processing messages</p>
                                    </div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <input type="number" id="batch-window-input" placeholder="30000"
                                    style="width: 100px; padding: 8px; border-radius: 8px; border: 1px solid var(--border); background: var(--card-bg);">
                                <button id="save-batch-window-btn" class="btn-primary"
                                    style="padding: 8px 16px; font-size: 0.9rem;">Save</button>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6;">
                                        <path
                                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z" />
                                    </svg>
                                    <div>
                                        <label>Database Migrations</label>
                                        <p>Apply schema updates to database</p>
                                    </div>
                                </div>
                            </div>
                            <button id="run-migration-btn" class="btn-primary"
                                style="background: #f59e0b; border: none;">Run Migrations</button>
                        </div>

                    </div>

                    <!-- Calendar & Scheduling Section -->
                    <div class="settings-section calendar-settings-section">
                        <div class="calendar-glow"></div>
                        <div class="settings-section-header calendar-section-header">
                            <div class="settings-icon calendar-section-icon">
                                <svg width="28" height="28" viewBox="0 0 24 24" fill="white">
                                    <path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"/>
                                </svg>
                            </div>
                            <div>
                                <h3>Calendar & Scheduling</h3>
                                <p>Let customers book meetings via WhatsApp ‚Äî powered by Google Calendar</p>
                            </div>
                        </div>
                        <div class="calendar-settings-body">
                            <div class="calendar-subsection">
                                <div class="calendar-subsection-title">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8h16v10z"/></svg>
                                    Calendar Connection
                                </div>
                                <div class="calendar-field-group">
                                    <label class="calendar-field-label">
                                        <svg class="calendar-field-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V8h16v10z"/></svg>
                                        Google Calendar ID
                                    </label>
                                    <input type="text" id="google-calendar-id" class="calendar-field-input" placeholder="your.email@gmail.com"
                                        title="Your Gmail or Google Workspace address linked to the calendar">
                                </div>
                            </div>

                            <div class="calendar-subsection">
                                <div class="calendar-subsection-title">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg>
                                    Working Hours
                                </div>
                                <div class="calendar-row">
                                    <div class="calendar-field-group">
                                        <label class="calendar-field-label">
                                            <svg class="calendar-field-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z"/></svg>
                                            Work Start
                                        </label>
                                        <input type="text" id="working-hours-start" class="calendar-field-input" placeholder="09:00" maxlength="5"
                                            title="24h format, e.g. 09:00">
                                    </div>
                                    <div class="calendar-field-group">
                                        <label class="calendar-field-label">
                                            <svg class="calendar-field-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm-1-10H7v2h4V12zm4 4h-4v2h4v-2zm-4-6H7v2h4V8z"/></svg>
                                            Work End
                                        </label>
                                        <input type="text" id="working-hours-end" class="calendar-field-input" placeholder="18:00" maxlength="5"
                                            title="24h format, e.g. 18:00">
                                    </div>
                                </div>
                            </div>

                            <div class="calendar-subsection">
                                <div class="calendar-subsection-title">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>
                                    Meeting Rules
                                </div>
                                <div class="calendar-row">
                                    <div class="calendar-field-group">
                                        <label class="calendar-field-label">
                                            <svg class="calendar-field-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/></svg>
                                            Min Duration (min)
                                        </label>
                                        <input type="number" id="min-meeting-duration" class="calendar-field-input" placeholder="10" min="5" max="120">
                                    </div>
                                    <div class="calendar-field-group">
                                        <label class="calendar-field-label">
                                            <svg class="calendar-field-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm4 11h-4v4h-2v-4H8v-2h2V7h2v4h4v2z"/></svg>
                                            Buffer (min)
                                        </label>
                                        <input type="number" id="buffer-time" class="calendar-field-input" placeholder="15" min="0" max="60"
                                            title="Gap between meetings">
                                    </div>
                                </div>
                            </div>

                            <div class="calendar-subsection">
                                <div class="calendar-subsection-title">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"/></svg>
                                    Availability
                                </div>
                                <div class="calendar-field-group">
                                    <div class="booking-days-header">
                                        <label class="calendar-field-label">Booking Days</label>
                                        <div class="booking-days-presets">
                                            <button type="button" class="preset-pill" data-preset="weekdays">Weekdays</button>
                                            <button type="button" class="preset-pill" data-preset="weekends">Weekends</button>
                                            <button type="button" class="preset-pill" data-preset="all">All Days</button>
                                        </div>
                                    </div>
                                    <div class="booking-days-pills" id="booking-days-pills">
                                        <button type="button" class="booking-day-pill" data-day="1">Mon</button>
                                        <button type="button" class="booking-day-pill" data-day="2">Tue</button>
                                        <button type="button" class="booking-day-pill" data-day="3">Wed</button>
                                        <button type="button" class="booking-day-pill" data-day="4">Thu</button>
                                        <button type="button" class="booking-day-pill" data-day="5">Fri</button>
                                        <button type="button" class="booking-day-pill" data-day="6">Sat</button>
                                        <button type="button" class="booking-day-pill" data-day="7">Sun</button>
                                    </div>
                                    <input type="hidden" id="booking-days" value="1,2,3,4,5">
                                </div>
                            </div>

                            <!-- Calendar Access Control -->
                            <div class="calendar-subsection access-control-subsection">
                                <div class="calendar-subsection-title">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/></svg>
                                    Access Control
                                </div>
                                <div class="calendar-field-group" style="gap: 20px;">
                                    <div style="flex: 1;">
                                        <div class="setting-label">
                                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" style="opacity: 0.6;">
                                                <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
                                            </svg>
                                            <div>
                                                <label style="margin-bottom: 4px; display: block;">Enable Calendar Access</label>
                                                <p style="font-size: 0.85rem; opacity: 0.7; margin: 0;">Allow users to schedule meetings and check availability</p>
                                            </div>
                                        </div>
                                    </div>
                                    <label class="toggle-switch" style="margin-top: 8px;">
                                        <input type="checkbox" id="calendar-access-toggle">
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div id="calendar-access-status" style="margin-top: 12px; padding: 10px; border-radius: 8px; background: var(--bg-light); font-size: 0.9rem; color: var(--text-secondary);">
                                    <span id="access-status-text">Loading status...</span>
                                </div>
                            </div>

                            <div class="calendar-save-wrap">
                                <button id="save-calendar-settings-btn" class="calendar-save-btn">
                                    <span class="btn-spinner" aria-hidden="true"></span>
                                    <span class="btn-text">Save Calendar Settings</span>
                                    <span class="btn-icon">‚úì</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Danger Zone Section -->
                    <div class="settings-section danger-section">
                        <div class="settings-section-header">
                            <div class="settings-icon"
                                style="background: linear-gradient(135deg, #f43f5e 0%, #dc2626 100%);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" />
                                </svg>
                            </div>
                            <div>
                                <h3>Danger Zone</h3>
                                <p>Irreversible actions</p>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6; color: var(--danger);">
                                        <path
                                            d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z" />
                                    </svg>
                                    <div>
                                        <label>Disconnect WhatsApp</label>
                                        <p>Log out from this device</p>
                                    </div>
                                </div>
                            </div>
                            <button class="btn-danger" id="disconnect-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z" />
                                </svg>
                                Disconnect
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Shops Page -->
            <div class="page" id="shops-page">
                <header class="page-header shop-page-header animate-in">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                        </button>
                        <h2>ShopFlow Manager</h2>
                    </div>
                </header>

                <!-- Views Container -->
                <div id="shopflow-container" class="animate-in" style="animation-delay: 0.1s;">
                    <!-- Shops List View -->
                    <div id="shops-view" class="view-section active">
                        <div class="shops-header glass-panel"
                            style="padding: 2rem; border-radius: 20px; display: flex; align-items: center; justify-content: space-between; margin-bottom: 2rem;">
                            <div>
                                <h2
                                    style="font-size: 2rem; background: linear-gradient(135deg, var(--text-primary) 0%, var(--text-secondary) 100%); -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 0.5rem;">
                                    Your Collections</h2>
                                <p style="color: var(--text-secondary); font-size: 1.1rem;">Manage your shops and career
                                    portfolios</p>
                            </div>
                            <button class="btn-primary" onclick="openCollectionTypeModal()"
                                style="padding: 1rem 2rem; font-size: 1rem; border-radius: 12px; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);">
                                + Create New
                            </button>
                        </div>

                        <div id="shopsGrid" class="shops-grid"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                            <!-- Populated by JS -->
                            <div class="empty-state glass-panel"
                                style="grid-column: 1 / -1; padding: 4rem; text-align: center; border-radius: 24px;">
                                <div class="empty-state-icon"
                                    style="font-size: 4rem; margin-bottom: 1rem; opacity: 0.8; animation: float 6s infinite ease-in-out;">
                                    üì¶</div>
                                <h3 class="empty-state-text" style="font-size: 1.5rem; margin-bottom: 0.5rem;">No
                                    collections yet</h3>
                                <p style="color: var(--text-secondary); max-width: 400px; margin: 0 auto;">Create a shop
                                    for products or a career portfolio to showcase your skills.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Single Shop Products View -->
                    <div id="products-view" class="view-section" style="display: none;">
                        <button class="btn-secondary back-btn" onclick="showShopsView()"
                            style="margin-bottom: 2rem; display: flex; align-items: center; gap: 0.5rem; width: auto; background: var(--glass-bg); padding: 0.75rem 1.5rem; border-radius: 12px; border: 1px solid var(--glass-border);">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                            Back to Shops
                        </button>

                        <div class="current-shop-banner glass-panel"
                            style="padding: 3rem; border-radius: 24px; display: flex; align-items: center; gap: 2rem; margin-bottom: 2rem; position: relative; overflow: hidden;">
                            <div
                                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(16, 185, 129, 0.05)); z-index: -1;">
                            </div>
                            <div class="current-shop-icon" id="currentShopIcon"
                                style="font-size: 4rem; filter: drop-shadow(0 0 10px rgba(255,255,255,0.2));">üè™</div>
                            <div class="current-shop-info">
                                <h3 id="currentShopName"
                                    style="font-size: 2.5rem; font-weight: 800; margin-bottom: 0.5rem;">Shop Name</h3>
                                <p id="currentShopDesc" style="font-size: 1.1rem; color: var(--text-secondary);">Shop
                                    Description</p>
                            </div>
                        </div>

                        <div class="products-view">
                            <!-- Add Product Form -->
                            <div class="add-product-section glass-panel"
                                style="padding: 2rem; border-radius: 20px; height: fit-content; position: sticky; top: 2rem;">
                                <h3 id="addProductTitle"
                                    style="font-size: 1.25rem; margin-bottom: 1.5rem; border-bottom: 1px solid var(--border); padding-bottom: 1rem;">
                                    Add New Product</h3>
                                <form id="addProductForm" onsubmit="handleAddProduct(event)"
                                    style="display: flex; flex-direction: column; gap: 1rem;">
                                    <div class="form-group">
                                        <label id="productNameLabel" for="productName"
                                            style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem; color: var(--text-secondary);">Product
                                            Name</label>
                                        <input type="text" id="productName" required class="input-modern"
                                            placeholder="e.g. Wireless Headphones"
                                            style="width: 100%; padding: 0.75rem; border-radius: 12px; background: rgba(255,255,255,0.8); border: 1px solid var(--border); color: var(--text-primary);">
                                    </div>

                                    <div class="form-group" id="productPriceStockGroup"
                                        style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                        <div id="productPriceGroup">
                                            <label
                                                style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem; color: var(--text-secondary);">Price</label>
                                            <input type="number" id="productPrice" placeholder="0.00"
                                                class="input-modern"
                                                style="width: 100%; padding: 0.75rem; border-radius: 12px; background: rgba(255,255,255,0.8); border: 1px solid var(--border); color: var(--text-primary);">
                                        </div>
                                        <div id="productStockGroup">
                                            <label
                                                style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem; color: var(--text-secondary);">Stock</label>
                                            <input type="number" id="productStock" placeholder="0" class="input-modern"
                                                style="width: 100%; padding: 0.75rem; border-radius: 12px; background: rgba(255,255,255,0.8); border: 1px solid var(--border); color: var(--text-primary);">
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label id="productDescLabel" for="productDesc"
                                            style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem; color: var(--text-secondary);">Description</label>
                                        <textarea id="productDesc" rows="3" class="input-modern"
                                            placeholder="Describe your product..."
                                            style="width: 100%; padding: 0.75rem; border-radius: 12px; background: rgba(255,255,255,0.8); border: 1px solid var(--border); color: var(--text-primary); resize: vertical;"></textarea>
                                    </div>

                                    <div class="form-group" id="productImageGroup">
                                        <label id="productImageLabel"
                                            style="display: block; margin-bottom: 0.5rem; font-size: 0.9rem; color: var(--text-secondary);">Product
                                            Image</label>
                                        <div class="image-upload" id="imageUploadArea"
                                            onclick="document.getElementById('imageInput').click()"
                                            style="border: 2px dashed var(--border); border-radius: 16px; padding: 2rem; text-align: center; cursor: pointer; transition: all 0.3s ease;">
                                            <input type="file" id="imageInput" accept="image/*"
                                                onchange="handleImageSelect(event)" style="display: none;">
                                            <div id="careerMultiPhotosHint" style="display: none; font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;">Career: Select multiple photos to rotate in ads</div>
                                            <div id="uploadPlaceholder">
                                                <div class="upload-icon"
                                                    style="font-size: 1.5rem; margin-bottom: 0.5rem;">üì∑</div>
                                                <div class="upload-text"
                                                    style="font-size: 0.9rem; color: var(--text-secondary);">Click to
                                                    upload image</div>
                                            </div>
                                            <img id="imagePreview" class="preview-image"
                                                style="max-width: 100%; border-radius: 8px; display: none;">
                                        </div>
                                        <button type="button" id="removeImageBtn" class="delete-product-btn"
                                            style="display: none; margin-top: 10px; width: 100%; padding: 0.5rem; border-radius: 8px; background: rgba(239, 68, 68, 0.15); color: #dc2626; border: none; cursor: pointer;"
                                            onclick="removeImage()">Remove
                                            Image</button>
                                    </div>

                                    <button type="submit" class="btn-primary" id="addProductSubmitBtn"
                                        style="padding: 1rem; border-radius: 12px; font-weight: 600; margin-top: 1rem;">Add
                                        Product</button>
                                </form>
                            </div>

                            <!-- Products List -->
                            <div class="products-section">
                                <div id="productsGrid" class="products-grid"
                                    style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1.5rem;">
                                    <!-- Populated by JS -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Collection Type Choice Modal -->
                <div id="collectionTypeModal" class="modal"
                    style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(59, 130, 246, 0.15); backdrop-filter: blur(5px); z-index: 1000; align-items: center; justify-content: center;">
                    <div class="modal-content glass-panel"
                        style="max-width: 600px; width: 90%; padding: 2rem; border-radius: 24px; position: relative; animation: fadeInScale 0.3s ease-out;">
                        <div class="modal-header" style="text-align: center; margin-bottom: 2rem;">
                            <h3 style="font-size: 1.75rem; font-weight: 700;">What would you like to create?</h3>
                            <button class="btn-close" onclick="closeCollectionTypeModal()"
                                style="position: absolute; top: 1.5rem; right: 1.5rem; background: none; border: none; font-size: 1.5rem; color: var(--text-secondary); cursor: pointer;">√ó</button>
                        </div>
                        <div class="collection-type-grid"
                            style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
                            <div class="collection-type-card" onclick="selectCollectionType('shop')"
                                style="background: rgba(59, 130, 246, 0.08); padding: 1.5rem; border-radius: 16px; cursor: pointer; transition: all 0.3s ease; border: 1px solid var(--border);">
                                <div class="collection-type-icon" style="font-size: 2.5rem; margin-bottom: 1rem;">üè™
                                </div>
                                <h4 style="margin-bottom: 0.5rem; color: var(--text-primary);">Product Shop</h4>
                                <p
                                    style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 1rem; line-height: 1.4;">
                                    Showcase and sell your products with prices, stock, and descriptions</p>
                                <div class="collection-type-features"
                                    style="display: flex; flex-direction: column; gap: 0.5rem; font-size: 0.8rem; color: var(--accent-glow);">
                                    <span>‚úì Product catalog</span>
                                    <span>‚úì Pricing & inventory</span>
                                    <span>‚úì Sales tracking</span>
                                </div>
                            </div>
                            <div class="collection-type-card" onclick="selectCollectionType('career')"
                                style="background: rgba(59, 130, 246, 0.08); padding: 1.5rem; border-radius: 16px; cursor: pointer; transition: all 0.3s ease; border: 1px solid var(--border);">
                                <div class="collection-type-icon" style="font-size: 2.5rem; margin-bottom: 1rem;">üíº
                                </div>
                                <h4 style="margin-bottom: 0.5rem; color: var(--text-primary);">Career Portfolio</h4>
                                <p
                                    style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 1rem; line-height: 1.4;">
                                    Showcase your skills, projects, and professional achievements</p>
                                <div class="collection-type-features"
                                    style="display: flex; flex-direction: column; gap: 0.5rem; font-size: 0.8rem; color: var(--accent-glow);">
                                    <span>‚úì Skills & projects</span>
                                    <span>‚úì Professional profile</span>
                                    <span>‚úì Personal branding</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Create Shop/Career Modal -->
                <div id="createShopModal" class="modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="createModalTitle">Create New Shop</h3>
                            <button class="btn-close" onclick="closeCreateShopModal()">√ó</button>
                        </div>
                        <form id="createShopForm" onsubmit="handleCreateShop(event)">
                            <input type="hidden" id="collectionType" value="shop">

                            <div class="form-group">
                                <label id="nameLabel">Shop Name</label>
                                <input type="text" id="shopName" required placeholder="e.g. Tech Store">
                                <small id="nameHint">Give your shop a catchy name</small>
                            </div>

                            <div class="form-group">
                                <label id="descLabel">Description</label>
                                <textarea id="shopDescription" rows="3"
                                    placeholder="What kind of products do you sell?"></textarea>
                                <small id="descHint">Describe what you offer</small>
                            </div>

                            <div class="form-group">
                                <label>Icon Emoji</label>
                                <input type="text" id="shopEmoji" placeholder="e.g. üè™" maxlength="2">
                                <small>Choose an emoji to represent your collection</small>
                            </div>

                            <div class="modal-buttons">
                                <button type="button" class="btn-secondary"
                                    onclick="closeCreateShopModal()">Cancel</button>
                                <button type="submit" class="btn-primary" id="createSubmitBtn">Create Shop</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>


            <!-- AI Profile Page -->
            <div class="page" id="ai-profile-page">
                <header class="page-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                        </button>
                        <h2>ü§ñ AI Agent Profile</h2>
                    </div>
                    <button class="btn-primary" id="save-ai-profile">Save Changes</button>
                </header>

                <div class="profile-container">
                    <div class="profile-section">
                        <h3>Agent Identity</h3>
                        <div class="form-group">
                            <label>Agent Name</label>
                            <input type="text" id="agent-name" placeholder="Representative">
                            <small>The name your AI agent will use</small>
                        </div>
                        <div class="form-group">
                            <label>Agent Role</label>
                            <input type="text" id="agent-role" placeholder="Personal Assistant">
                            <small>What role does your agent play?</small>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h3>Personality & Style</h3>
                        <div class="form-group">
                            <label>Personality Traits</label>
                            <textarea id="personality-traits" rows="3"
                                placeholder="Professional, helpful, and efficient"></textarea>
                            <small>Describe how the AI should behave</small>
                        </div>
                        <div class="form-group">
                            <label>Communication Style</label>
                            <textarea id="communication-style" rows="2"
                                placeholder="Friendly yet professional"></textarea>
                            <small>How should the AI communicate?</small>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h3>Custom System Prompt</h3>
                        <div class="form-group">
                            <label>System Prompt Override (Advanced)</label>
                            <textarea id="system-prompt" rows="6"
                                placeholder="Leave empty to use default prompt..."></textarea>
                            <small>‚ö†Ô∏è Advanced: Override the default AI instructions</small>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h3>Behavior Settings</h3>
                        <div class="form-group">
                            <label>Response Length</label>
                            <select id="response-length">
                                <option value="short">Short & Concise</option>
                                <option value="medium" selected>Medium</option>
                                <option value="long">Detailed & Comprehensive</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Formality Level: <span id="formality-value">5</span>/10</label>
                            <input type="range" id="formality-level" min="1" max="10" value="5">
                            <div class="range-labels">
                                <span>Casual</span>
                                <span>Formal</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="use-emojis" checked>
                                <span>Use Emojis in Responses</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Profile Page -->
            <div class="page" id="user-profile-page">
                <header class="page-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                        </button>
                        <h2>üë§ Your Profile</h2>
                    </div>
                    <button class="btn-primary" id="save-user-profile">Save Changes</button>
                </header>

                <div class="profile-container">
                    <div class="profile-section">
                        <h3>Personal Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Full Name</label>
                                <input type="text" id="user-full-name" placeholder="John Doe">
                            </div>
                            <div class="form-group">
                                <label>System Owner Phone</label>
                                <div style="display: flex; gap: 8px; align-items: center;">
                                    <select id="owner-country-code"
                                        style="width: 140px; padding: 8px; border-radius: 8px; border: 1px solid var(--border); background: var(--card-bg); color: var(--text-primary);">
                                        <option value="+254">üá∞üá™ +254</option>
                                        <option value="+1">üá∫üá∏ +1</option>
                                        <option value="+44">üá¨üáß +44</option>
                                        <option value="+91">üáÆüá≥ +91</option>
                                        <option value="+234">üá≥üá¨ +234</option>
                                        <option value="+27">üáøüá¶ +27</option>
                                        <option value="+256">üá∫üá¨ +256</option>
                                        <option value="+255">üáπüáø +255</option>
                                        <option value="+250">üá∑üáº +250</option>
                                        <option value="+86">üá®üá≥ +86</option>
                                        <option value="+81">üáØüáµ +81</option>
                                        <option value="+82">üá∞üá∑ +82</option>
                                        <option value="+33">üá´üá∑ +33</option>
                                        <option value="+49">üá©üá™ +49</option>
                                        <option value="+39">üáÆüáπ +39</option>
                                        <option value="+34">üá™üá∏ +34</option>
                                        <option value="+61">üá¶üá∫ +61</option>
                                        <option value="+55">üáßüá∑ +55</option>
                                        <option value="+52">üá≤üáΩ +52</option>
                                        <option value="+971">üá¶üá™ +971</option>
                                        <option value="+966">üá∏üá¶ +966</option>
                                        <option value="+20">üá™üá¨ +20</option>
                                    </select>
                                    <input type="tel" id="system-owner-phone" placeholder="745026933"
                                        style="flex: 1; padding: 8px; border-radius: 8px; border: 1px solid var(--border); background: var(--card-bg);"
                                        maxlength="15">
                                    <button id="save-owner-phone-btn" class="btn-primary"
                                        style="padding: 8px 16px; font-size: 0.9rem; white-space: nowrap;">Save</button>
                                </div>
                                <small>This is the trusted owner number. Changes take effect immediately.</small>
                            </div>
                            <div class="form-group">
                                <label>Preferred Name</label>
                                <input type="text" id="user-preferred-name" placeholder="John">
                                <small>How should the AI address you?</small>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Title/Position</label>
                                <input type="text" id="user-title" placeholder="CEO">
                            </div>
                            <div class="form-group">
                                <label>Company</label>
                                <input type="text" id="user-company" placeholder="Acme Corp">
                            </div>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h3>Contact Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" id="user-email" placeholder="john@acme.com">
                            </div>
                            <div class="form-group">
                                <label>Phone</label>
                                <input type="tel" id="user-phone" placeholder="+1234567890">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Location</label>
                                <input type="text" id="user-location" placeholder="New York, USA">
                            </div>
                            <div class="form-group">
                                <label>Timezone</label>
                                <div class="timezone-picker-wrapper">
                                    <input type="text" id="timezone-search" placeholder="Search for a city..."
                                        autocomplete="off">
                                    <input type="hidden" id="user-timezone">
                                    <div class="timezone-dropdown" id="timezone-dropdown">
                                        <div class="timezone-dropdown-header">
                                            <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd"
                                                    d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                                    clip-rule="evenodd" />
                                            </svg>
                                            <span>Select your city</span>
                                        </div>
                                        <div class="timezone-list" id="timezone-list">
                                            <!-- Populated by JavaScript -->
                                        </div>
                                    </div>
                                </div>
                                <small class="timezone-display" id="timezone-display"></small>
                            </div>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h3>Professional Context</h3>
                        <div class="form-group">
                            <label>Industry</label>
                            <input type="text" id="user-industry" placeholder="Technology">
                        </div>
                        <div class="form-group">
                            <label>Role Description</label>
                            <textarea id="user-role" rows="3" placeholder="Describe what you do..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>Key Responsibilities</label>
                            <textarea id="user-responsibilities" rows="3"
                                placeholder="What are your main responsibilities?"></textarea>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h3>Availability & Preferences</h3>
                        <div class="form-group">
                            <label>Working Hours</label>
                            <input type="text" id="user-working-hours" placeholder="9 AM - 5 PM EST">
                        </div>
                        <div class="form-group">
                            <label>Priorities</label>
                            <textarea id="user-priorities" rows="2" placeholder="What matters most to you?"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Background Info (for AI context)</label>
                            <textarea id="user-background" rows="4"
                                placeholder="Any additional context that helps the AI understand you better..."></textarea>
                            <small>This information helps the AI provide more personalized responses</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Marketing Page (Premium Design) -->
            <div class="page" id="marketing-page">
                <!-- Animated Background -->
                <div class="marketing-animated-bg">
                    <div class="marketing-orb marketing-orb-1"></div>
                    <div class="marketing-orb marketing-orb-2"></div>
                    <div class="marketing-orb marketing-orb-3"></div>
                </div>

                <div class="marketing-app-container">
                    <!-- Marketing Sidebar -->
                    <aside class="marketing-sidebar">
                        <div class="marketing-brand">
                            <div class="marketing-brand-title">Representative</div>
                            <div class="marketing-brand-subtitle">AI AGENT</div>
                        </div>

                        <nav class="marketing-nav-menu">
                            <div class="marketing-nav-item" onclick="switchPage('dashboard')">
                                <svg class="marketing-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                                </svg>
                                <span>Dashboard</span>
                            </div>

                            <div class="marketing-nav-item" onclick="switchPage('chats')">
                                <svg class="marketing-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                                </svg>
                                <span>Chats</span>
                                <span class="marketing-badge" id="marketing-chat-count">8</span>
                            </div>

                            <div class="marketing-nav-item" onclick="switchPage('contacts')">
                                <svg class="marketing-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                                </svg>
                                <span>Contacts</span>
                            </div>

                            <div class="marketing-nav-item marketing-nav-item-active">
                                <svg class="marketing-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z" />
                                </svg>
                                <span>Marketing</span>
                            </div>

                            <div class="marketing-nav-item" onclick="switchPage('ai-profile')">
                                <svg class="marketing-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                </svg>
                                <span>AI Profile</span>
                            </div>

                            <div class="marketing-nav-item" onclick="switchPage('user-profile')">
                                <svg class="marketing-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                </svg>
                                <span>My Profile</span>
                            </div>

                            <div class="marketing-nav-item" onclick="switchPage('settings')">
                                <svg class="marketing-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                </svg>
                                <span>Settings</span>
                            </div>
                        </nav>

                        <div class="marketing-connection-status">
                            <div class="marketing-status-indicator">
                                <span class="marketing-status-dot"></span>
                                <span>Disconnected</span>
                            </div>
                        </div>
                    </aside>

                    <!-- Main Content -->
                    <main class="marketing-main-content">
                        <header class="marketing-header">
                            <div class="marketing-header-top">
                                <div>
                                    <h1 class="marketing-page-title">Marketing Command Center</h1>
                                    <p class="marketing-header-subtitle">Manage automated campaigns & audience targeting
                                    </p>
                                </div>
                                <button class="marketing-btn-primary" onclick="openSimpleCampaignModal()">
                                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M12 4v16m8-8H4" />
                                    </svg>
                                    New Campaign
                                </button>
                            </div>
                        </header>


                        <!-- Stats Grid -->
                        <div class="marketing-stats-grid">
                            <div class="marketing-stat-card">
                                <div class="marketing-stat-icon">
                                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </div>
                                <div class="marketing-stat-label">Active Campaigns</div>
                                <div class="marketing-stat-value" id="mini-active-count">0</div>
                                <div class="marketing-stat-trend">
                                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                                    </svg>
                                    <span>Running</span>
                                </div>
                            </div>

                            <div class="marketing-stat-card">
                                <div class="marketing-stat-icon">
                                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                                    </svg>
                                </div>
                                <div class="marketing-stat-label">Audience Reach</div>
                                <div class="marketing-stat-value" id="mini-reach-count">0</div>
                                <div class="marketing-stat-trend">
                                    <span>Potential</span>
                                </div>
                            </div>

                            <div class="marketing-stat-card">
                                <div class="marketing-stat-icon">
                                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </div>
                                <div class="marketing-stat-label">Next Post</div>
                                <div class="marketing-stat-value" id="mini-next-slot">--:--</div>
                                <div class="marketing-stat-trend">
                                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                    <span>Upcoming</span>
                                </div>
                            </div>

                            <div class="marketing-stat-card">
                                <div class="marketing-stat-icon">
                                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
                                    </svg>
                                </div>
                                <div class="marketing-stat-label">Campaign Quality</div>
                                <div class="marketing-stat-value" style="font-size: 2rem;">--</div>
                                <div class="marketing-stat-trend">
                                    <span>Professional</span>
                                </div>
                            </div>
                        </div>

                        <!-- Content Grid -->
                        <div class="marketing-content-grid">
                            <!-- Recent Campaigns -->
                            <div class="marketing-card marketing-card-full">
                                <div class="marketing-card-header">
                                    <div>
                                        <h2 class="marketing-card-title">Active Campaigns</h2>
                                        <p class="marketing-card-subtitle">Manage and monitor your automated campaigns
                                        </p>
                                    </div>
                                    <button class="marketing-btn-secondary" onclick="refreshCampaigns()">
                                        <svg width="16" height="16" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                                        </svg>
                                        Refresh
                                    </button>
                                </div>
                                <div id="mini-campaigns-list" class="marketing-campaigns-container">
                                    <div class="marketing-empty-state">
                                        <div class="marketing-empty-icon">üìä</div>
                                        <p class="marketing-empty-title">No campaigns yet</p>
                                        <p class="marketing-empty-desc">Create your first campaign to get started with
                                            automated marketing!</p>
                                    </div>
                                </div>
                            </div>




                            <!-- (Brand Identity Removed) -->

                        </div>

                        <!-- Hidden Mini Tabs Content (for backward compatibility) -->
                        <div style="display: none;">
                            <div id="view-dashboard" class="mini-view"></div>
                            <div id="view-campaigns" class="mini-view"></div>
                            <div id="view-audience" class="mini-view">
                                <div id="mini-groups-list" class="mini-list-grid scrollable-list">
                                    <p class="empty-text">Click Refresh to load groups...</p>
                                </div>
                            </div>
                            <div id="view-settings" class="mini-view"></div>
                        </div>
                    </main>
                </div>

                <!-- Campaign Modal -->
                <div class="marketing-modal-overlay" id="simple-campaign-modal">
                    <div class="marketing-modal">
                        <div class="marketing-modal-header">
                            <h3 class="marketing-modal-title">Create New Campaign</h3>
                            <button class="marketing-modal-close" onclick="closeSimpleCampaignModal()">√ó</button>
                        </div>
                        <div class="marketing-modal-body">
                            <!-- Step Indicator -->
                            <div class="marketing-step-indicator">
                                <div class="marketing-step marketing-step-active">
                                    <div class="marketing-step-number">1</div>
                                    <div class="marketing-step-label">Details</div>
                                </div>
                                <div class="marketing-step">
                                    <div class="marketing-step-number">2</div>
                                    <div class="marketing-step-label">Timing</div>
                                </div>
                                <div class="marketing-step">
                                    <div class="marketing-step-number">3</div>
                                    <div class="marketing-step-label">Audience</div>
                                </div>
                                <div class="marketing-step">
                                    <div class="marketing-step-number">4</div>
                                    <div class="marketing-step-label">Review</div>
                                </div>
                            </div>

                            <!-- Campaign Form -->
                            <form id="campaign-wizard-form">
                                <input type="hidden" id="mini-camp-id">

                                <!-- Step 1: Details -->
                                <div class="marketing-wizard-step" data-step="1">
                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">Campaign Name</label>
                                        <input type="text" id="mini-camp-name" class="marketing-form-input"
                                            placeholder="e.g. Summer Sale 2026">
                                    </div>

                                    <!-- Content Source: Existing vs AI -->
                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">Ad Content Source</label>
                                        <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.75rem;">
                                            Choose how to get photos for your ads:
                                        </p>
                                        <div class="content-source-options" style="display: flex; flex-direction: column; gap: 0.75rem;">
                                            <label class="content-source-option" style="display: flex; align-items: flex-start; gap: 0.75rem; padding: 1rem; border-radius: 12px; border: 2px solid var(--border-color); cursor: pointer; transition: all 0.2s;">
                                                <input type="radio" name="content-source" value="existing" id="content-source-existing" onchange="toggleContentSourceUI('existing')">
                                                <div>
                                                    <strong>üì¶ Use existing items</strong>
                                                    <p style="margin: 0.25rem 0 0; font-size: 0.85rem; color: var(--text-secondary);">Select a product or portfolio item from your Shops page</p>
                                                </div>
                                            </label>
                                            <label class="content-source-option" style="display: flex; align-items: flex-start; gap: 0.75rem; padding: 1rem; border-radius: 12px; border: 2px solid var(--border-color); cursor: pointer; transition: all 0.2s;">
                                                <input type="radio" name="content-source" value="ai" id="content-source-ai" checked onchange="toggleContentSourceUI('ai')">
                                                <div>
                                                    <strong>‚ú® AI-generated photos</strong>
                                                    <p style="margin: 0.25rem 0 0; font-size: 0.85rem; color: var(--text-secondary);">Let AI create custom ad images based on your product description</p>
                                                </div>
                                            </label>
                                        </div>
                                        <!-- Product/Shop selector (shown when "existing" selected) -->
                                        <div id="campaign-product-selector" style="display: none; margin-top: 1rem;">
                                            <label class="marketing-form-label">Select what to promote</label>
                                            <select id="mini-selected-product" class="marketing-form-input">
                                                <option value="">-- Load shops first --</option>
                                            </select>
                                            <small style="color: var(--text-secondary); display: block; margin-top: 0.25rem;">Choose "Rotate all" to cycle through every product/item in that shop. Or pick a single item.</small>
                                        </div>
                                    </div>

                                    <!-- Business Description (NEW) -->
                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">
                                            Describe Your Business
                                            <small
                                                style="color: var(--text-secondary); font-weight: normal; display: block; margin-top: 0.25rem;">
                                                Briefly explain what your business does, who it serves, and what makes
                                                it special
                                            </small>
                                        </label>
                                        <textarea id="mini-business-desc-raw" class="marketing-form-input" rows="3"
                                            placeholder="e.g., We sell handmade leather bags for professionals who value quality and style..."></textarea>
                                        <button type="button" class="marketing-btn-secondary" id="enhance-desc-btn"
                                            style="margin-top: 0.5rem; width: 100%;">
                                            ‚ú® Enhance with AI
                                        </button>
                                        <div id="enhanced-desc-container" style="display: none; margin-top: 1rem;">
                                            <label class="marketing-form-label">Enhanced Description
                                                (AI-Generated)</label>
                                            <div id="enhanced-desc-display"
                                                style="background: var(--bg-input); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-color); font-size: 0.875rem; line-height: 1.6; color: var(--text-primary);">
                                            </div>
                                            <input type="hidden" id="mini-business-desc" />
                                        </div>
                                    </div>

                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">Product/Service Info</label>
                                        <textarea id="mini-product-info" class="marketing-form-input" rows="3"
                                            placeholder="Describe what you are promoting..."></textarea>
                                    </div>
                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">Unique Selling Point</label>
                                        <input type="text" id="mini-usp" class="marketing-form-input"
                                            placeholder="Why should people buy?">
                                    </div>

                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">Company Link (Optional)</label>
                                        <input type="url" id="mini-company-link" class="marketing-form-input"
                                            placeholder="https://example.com">
                                        <small
                                            style="color: var(--text-secondary); display: block; margin-top: 0.25rem;">
                                            This link will be included at the end of every ad post.
                                        </small>
                                    </div>

                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">Brand Voice</label>
                                        <select id="mini-voice" class="marketing-form-input">
                                            <option value="professional">Professional</option>
                                            <option value="friendly">Friendly</option>
                                            <option value="urgent">Urgent</option>
                                            <option value="luxury">Luxury</option>
                                            <option value="playful">Playful</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Step 2: Timing -->
                                <div class="marketing-wizard-step" data-step="2" style="display: none;">
                                    <p style="margin-bottom: 1.5rem; color: var(--text-secondary); font-size: 0.95rem;">
                                        Choose when to post your automated ads. Toggle time slots on or off and set your
                                        preferred times.
                                    </p>

                                    <!-- Time Slot Cards -->
                                    <div style="display: flex; flex-direction: column; gap: 1rem;">
                                        <!-- Morning Slot -->
                                        <div class="time-slot-card" data-slot="morning">
                                            <div class="time-slot-header">
                                                <div class="time-slot-info">
                                                    <div class="time-slot-icon">üåÖ</div>
                                                    <div>
                                                        <h4 class="time-slot-title">Morning</h4>
                                                        <p class="time-slot-desc">Catch early risers and professionals
                                                        </p>
                                                    </div>
                                                </div>
                                                <label class="time-slot-toggle">
                                                    <input type="checkbox" id="toggle-morning" checked
                                                        onchange="toggleTimeSlot('morning')">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            <div class="time-slot-body" id="body-morning">
                                                <div class="time-input-wrapper">
                                                    <label class="time-input-label">Post Time</label>
                                                    <input type="time" id="mini-time-m"
                                                        class="marketing-form-input time-input" value="07:00">
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Afternoon Slot -->
                                        <div class="time-slot-card" data-slot="afternoon">
                                            <div class="time-slot-header">
                                                <div class="time-slot-info">
                                                    <div class="time-slot-icon">‚òÄÔ∏è</div>
                                                    <div>
                                                        <h4 class="time-slot-title">Afternoon</h4>
                                                        <p class="time-slot-desc">Reach people during lunch breaks</p>
                                                    </div>
                                                </div>
                                                <label class="time-slot-toggle">
                                                    <input type="checkbox" id="toggle-afternoon" checked
                                                        onchange="toggleTimeSlot('afternoon')">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            <div class="time-slot-body" id="body-afternoon">
                                                <div class="time-input-wrapper">
                                                    <label class="time-input-label">Post Time</label>
                                                    <input type="time" id="mini-time-a"
                                                        class="marketing-form-input time-input" value="13:00">
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Evening Slot -->
                                        <div class="time-slot-card" data-slot="evening">
                                            <div class="time-slot-header">
                                                <div class="time-slot-info">
                                                    <div class="time-slot-icon">üåô</div>
                                                    <div>
                                                        <h4 class="time-slot-title">Evening</h4>
                                                        <p class="time-slot-desc">Connect with people relaxing at home
                                                        </p>
                                                    </div>
                                                </div>
                                                <label class="time-slot-toggle">
                                                    <input type="checkbox" id="toggle-evening" checked
                                                        onchange="toggleTimeSlot('evening')">
                                                    <span class="toggle-slider"></span>
                                                </label>
                                            </div>
                                            <div class="time-slot-body" id="body-evening">
                                                <div class="time-input-wrapper">
                                                    <label class="time-input-label">Post Time</label>
                                                    <input type="time" id="mini-time-e"
                                                        class="marketing-form-input time-input" value="19:00">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="time-slot-tip">
                                        <svg width="16" height="16" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                        <span>Tip: Enable at least one time slot. Disabled slots won't post any
                                            ads.</span>
                                    </div>
                                </div>

                                <div class="marketing-wizard-step" data-step="3" style="display: none;">
                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">Select Target Audience</label>
                                        <div id="modal-audience-list" class="marketing-list-grid scrollable-list">
                                            <p class="empty-text">Loading groups...</p>
                                        </div>
                                        <small
                                            style="color: var(--text-secondary); display: block; margin-top: 0.5rem;">Select
                                            groups to target specifically with this campaign.</small>
                                    </div>
                                </div>

                                <!-- Step 4: Review -->
                                <div class="marketing-wizard-step" data-step="4" style="display: none;">
                                    <div class="marketing-review-summary">
                                        <h4 style="margin-bottom: 1rem; color: var(--text-primary);">Campaign Summary
                                        </h4>
                                        <div
                                            style="background: var(--bg-input); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-color);">
                                            <p><strong>Name:</strong> <span id="review-name">--</span></p>
                                            <p><strong>Schedule:</strong> <span id="review-schedule">--</span></p>
                                            <p><strong>Audience:</strong> <span id="review-audience">--</span></p>
                                        </div>
                                    </div>
                                </div>

                                <div class="marketing-btn-group" style="margin-top: 1.5rem;">
                                    <button type="button" class="marketing-btn-secondary" id="btn-cancel"
                                        onclick="closeSimpleCampaignModal()">Cancel</button>

                                    <button type="button" class="marketing-btn-secondary" id="btn-back"
                                        onclick="prevWizardStep()" style="display: none;">Back</button>

                                    <button type="button" class="marketing-btn-primary" id="btn-next" style="flex: 1;"
                                        onclick="nextWizardStep()">
                                        Next
                                    </button>

                                    <button type="button" class="marketing-btn-primary" id="btn-submit"
                                        style="flex: 1; display: none;" onclick="submitMiniCampaign()">
                                        Create Campaign
                                        <svg width="16" height="16" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M14 5l7 7m0 0l-7 7m7-7H3" />
                                        </svg>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

            </div>
            <!-- Marketing Tab -->
            <div class="marketing-tab-content active" id="marketing-tab-campaigns">
                <!-- Campaign List (Standard) -->
                <!-- ... content handled by app.js ... -->
            </div>

            <!-- (Other tabs hidden) -->
    </div>
    </div>
    </div>

        </main>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <script src="/app.js"></script>
</body>

</html>
                        <path fill-rule="evenodd"
                            d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                            clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
        </header>

        <div class="content-wrapper">
            <div class="communities-stats-row">
                <div class="stat-card mini">
                    <div class="stat-label">Total Groups</div>
                    <div class="stat-value" id="comm-total-count">0</div>
                </div>
                <div class="stat-card mini">
                    <div class="stat-label">Total Reach</div>
                    <div class="stat-value" id="comm-total-reach">0</div>
                </div>
            </div>

            <div id="communities-list" class="marketing-list-grid">
                <p class="empty-text">Loading communities...</p>
            </div>
        </div>
    </div>

    <!-- AI Profile Page -->
    <div class="page" id="ai-profile-page">
        <header class="page-header">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                    </svg>
                </button>
                <h2>ü§ñ AI Agent Profile</h2>
            </div>
            <button class="btn-primary" id="save-ai-profile">Save Changes</button>
        </header>

        <div class="profile-container">
            <div class="profile-section">
                <h3>Agent Identity</h3>
                <div class="form-group">
                    <label>Shop Type</label>
                    <div class="radio-group" style="display: flex; gap: 1rem; margin-top: 0.5rem;">
                        <label class="radio-label"
                            style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="radio" name="shopType" value="shop" checked
                                onchange="toggleShopTypeDescription()">
                            <span>Retail Shop (Products)</span>
                        </label>
                        <label class="radio-label"
                            style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="radio" name="shopType" value="career" onchange="toggleShopTypeDescription()">
                            <span>Career / Portfolio (Skills & Achievements)</span>
                        </label>
                    </div>
                    <small id="shop-type-desc"
                        style="color: var(--text-secondary); display: block; margin-top: 0.5rem;">
                        Standard retail shop for selling products with prices and stock.
                    </small>
                </div>

                <div class="form-group">
                    <label>Agent Name</label>
                    <input type="text" id="agent-name" placeholder="Representative">
                    <small>The name your AI agent will use</small>
                </div>
                <div class="form-group">
                    <label>Agent Role</label>
                    <input type="text" id="agent-role" placeholder="Personal Assistant">
                    <small>What role does your agent play?</small>
                </div>
            </div>

            <div class="profile-section">
                <h3>Personality & Style</h3>
                <div class="form-group">
                    <label>Personality Traits</label>
                    <textarea id="personality-traits" rows="3"
                        placeholder="Professional, helpful, and efficient"></textarea>
                    <small>Describe how the AI should behave</small>
                </div>
                <div class="form-group">
                    <label>Communication Style</label>
                    <textarea id="communication-style" rows="2" placeholder="Friendly yet professional"></textarea>
                    <small>How should the AI communicate?</small>
                </div>
            </div>

            <div class="profile-section">
                <h3>Custom System Prompt</h3>
                <div class="form-group">
                    <label>System Prompt Override (Advanced)</label>
                    <textarea id="system-prompt" rows="6" placeholder="Leave empty to use default prompt..."></textarea>
                    <small>‚ö†Ô∏è Advanced: Override the default AI instructions</small>
                </div>
            </div>

            <div class="profile-section">
                <h3>Behavior Settings</h3>
                <div class="form-group">
                    <label>Response Length</label>
                    <select id="response-length">
                        <option value="short">Short & Concise</option>
                        <option value="medium" selected>Medium</option>
                        <option value="long">Detailed & Comprehensive</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Formality Level: <span id="formality-value">5</span>/10</label>
                    <input type="range" id="formality-level" min="1" max="10" value="5">
                    <div class="range-labels">
                        <span>Casual</span>
                        <span>Formal</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="use-emojis" checked>
                        <span>Use Emojis in Responses</span>
                    </label>
                </div>
            </div>
        </div>
    </div>


    <!-- User Profile Page -->
    <div class="page" id="user-profile-page">
        <header class="page-header">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                    </svg>
                </button>
                <h2>üë§ Your Profile</h2>
            </div>
            <button class="btn-primary" id="save-user-profile">Save Changes</button>
        </header>

        <div class="profile-container">
            <div class="profile-section">
                <h3>Personal Information</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="user-full-name" placeholder="John Doe">
                    </div>
                    <div class="form-group">
                        <label>Preferred Name</label>
                        <input type="text" id="user-preferred-name" placeholder="John">
                        <small>How should the AI address you?</small>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Title/Position</label>
                        <input type="text" id="user-title" placeholder="CEO">
                    </div>
                    <div class="form-group">
                        <label>Company</label>
                        <input type="text" id="user-company" placeholder="Acme Corp">
                    </div>
                </div>
            </div>

            <div class="profile-section">
                <h3>Contact Information</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="user-email" placeholder="john@acme.com">
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" id="user-phone" placeholder="+1234567890">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Location</label>
                        <input type="text" id="user-location" placeholder="New York, USA">
                    </div>
                    <div class="form-group">
                        <label>Timezone</label>
                        <div class="timezone-picker-wrapper">
                            <input type="text" id="timezone-search" placeholder="Search for a city..."
                                autocomplete="off">
                            <input type="hidden" id="user-timezone">
                            <div class="timezone-dropdown" id="timezone-dropdown">
                                <div class="timezone-dropdown-header">
                                    <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                            clip-rule="evenodd" />
                                    </svg>
                                    <span>Select your city</span>
                                </div>
                                <div class="timezone-list" id="timezone-list">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                        <small class="timezone-display" id="timezone-display"></small>
                    </div>
                </div>
            </div>

            <div class="profile-section">
                <h3>Professional Context</h3>
                <div class="form-group">
                    <label>Industry</label>
                    <input type="text" id="user-industry" placeholder="Technology">
                </div>
                <div class="form-group">
                    <label>Role Description</label>
                    <textarea id="user-role" rows="3" placeholder="Describe what you do..."></textarea>
                </div>
                <div class="form-group">
                    <label>Key Responsibilities</label>
                    <textarea id="user-responsibilities" rows="3"
                        placeholder="What are your main responsibilities?"></textarea>
                </div>
            </div>

            <div class="profile-section">
                <h3>Availability & Preferences</h3>
                <div class="form-group">
                    <label>Working Hours</label>
                    <input type="text" id="user-working-hours" placeholder="9 AM - 5 PM EST">
                </div>
                <div class="form-group">
                    <label>Priorities</label>
                    <textarea id="user-priorities" rows="2" placeholder="What matters most to you?"></textarea>
                </div>
                <div class="form-group">
                    <label>Background Info (for AI context)</label>
                    <textarea id="user-background" rows="4"
                        placeholder="Any additional context that helps the AI understand you better..."></textarea>
                    <small>This information helps the AI provide more personalized responses</small>
                </div>
            </div>
        </div>
    </div>
    <!-- Marketing Page (Redesigned) -->
    <div class="page" id="marketing-page">
        <!-- Dashboard Header -->
        <header class="marketing-header">
            <div class="header-left">
                <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                    </svg>
                </button>
                <div>
                    <h2>Marketing Command Center</h2>
                    <p class="subtitle">Manage automated campaigns & audience targeting</p>
                </div>
            </div>
            <div class="header-right">
                <button class="btn-text" onclick="openAudienceManager()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                    </svg>
                    Audience
                </button>
                <button class="btn-primary" onclick="openCampaignWizard()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                    </svg>
                    New Campaign
                </button>
            </div>
        </header>

        <!-- Dashboard Stats Grid -->
        <div class="marketing-dashboard-grid">
            <div class="marketing-stat-card glass-panel">
                <div class="stat-icon-glow purple">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 12h2v5H7zm4-3h2v8h-2zm4-3h2v11h-2z" />
                    </svg>
                </div>
                <div class="stat-info">
                    <h3>Active Campaigns</h3>
                    <p class="stat-number" id="mkt-active-count">0</p>
                    <span class="stat-trend trend-neutral">--</span>
                </div>
            </div>

            <div class="marketing-stat-card glass-panel">
                <div class="stat-icon-glow pink">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                    </svg>
                </div>
                <div class="stat-info">
                    <h3>Audience Reach</h3>
                    <p class="stat-number" id="mkt-audience-reach">0</p>
                    <span class="stat-trend trend-up">Potential</span>
                </div>
            </div>

            <div class="marketing-stat-card glass-panel">
                <div class="stat-icon-glow blue">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" />
                    </svg>
                </div>
                <div class="stat-info">
                    <h3>Next Post</h3>
                    <p class="stat-number minute-text" id="mkt-next-slot">--:--</p>
                    <span class="stat-trend">Upcoming</span>
                </div>
            </div>
        </div>

        <!-- Main Layout -->
        <div class="marketing-layout">
            <!-- Left: Campaigns Grid -->
            <div class="layout-main">
                <div class="section-title">
                    <h3>Recent Campaigns</h3>
                    <button class="btn-icon-sm" onclick="refreshCampaigns()" title="Refresh List">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
                        </svg>
                    </button>
                </div>
                <div id="campaigns-grid" class="campaigns-grid-modern">
                    <!-- Populated via JS -->
                    <div class="empty-state-card">
                        <p>Loading your campaigns...</p>
                    </div>
                </div>
            </div>

            <!-- Right: Brand & Quick Actions -->
            <aside class="layout-sidebar">
                <!-- Brand Identity Card -->
                <div class="brand-asset-card glass-panel">
                    <div class="card-header">
                        <h3>Brand Identity</h3>
                        <button class="btn-xs" onclick="openBrandProfile()">Edit</button>
                    </div>
                    <div class="brand-voice-preview" id="brand-voice-display">
                        <span class="badge-voice">Professional</span>
                    </div>
                    <p class="brand-desc-preview" id="brand-desc-display">
                        No product info set.
                    </p>
                    <div class="brand-progress">
                        <label>Profile Strength</label>
                        <div class="progress-bar-bg">
                            <div class="progress-bar-fill" id="brand-strength" style="width: 20%;"></div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="actions-card glass-panel">
                    <h3>Quick Actions</h3>
                    <div class="action-list">
                        <button class="action-item" onclick="openAudienceManager()">
                            <div class="icon-box p-green">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                                </svg>
                            </div>
                            <span>Manage Audience</span>
                        </button>
                        <button class="action-item" onclick="triggerTestAd()">
                            <div class="icon-box p-yellow">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                                </svg>
                            </div>
                            <span>Test Ad Generation</span>
                        </button>
                    </div>
                </div>
            </aside>
        </div>

        <!-- OVERLAYS / MODALS -->

        <!-- 1. Campaign Wizard Overlay -->
        <div id="campaign-wizard-overlay" class="modal-overlay">
            <div class="glass-modal large-modal">
                <div class="modal-header">
                    <h2>Create New Campaign</h2>
                    <button class="btn-close" onclick="closeCampaignWizard()">√ó</button>
                </div>
                <div class="modal-body">
                    <!-- Step Indicator -->
                    <div class="step-indicator">
                        <div class="step active">
                            <div class="step-number">1</div>
                            <div class="step-label">Details</div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-label">Schedule</div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-label">Review</div>
                        </div>
                    </div>

                    <input type="hidden" id="mini-camp-id">
                    <div class="form-group">
                        <label>Campaign Name</label>
                        <input type="text" id="mini-camp-name" placeholder="e.g. Summer Sale" class="form-input">
                    </div>

                    <div class="form-row-2">
                        <div class="form-group">
                            <label>Morning</label>
                            <input type="time" id="mini-time-m" value="09:00" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Afternoon</label>
                            <input type="time" id="mini-time-a" value="14:00" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Evening</label>
                            <input type="time" id="mini-time-e" value="19:00" class="form-input">
                        </div>
                    </div>
                </div>
                <div class="wizard-container">
                    <div class="wizard-steps-nav">
                        <div class="step-nav-item active" data-step="1">1. Details</div>
                        <div class="step-nav-item" data-step="2">2. Timing</div>
                        <div class="step-nav-item" data-step="3">3. Audience</div>
                        <div class="step-nav-item" data-step="4">4. Review</div>
                    </div>

                    <div class="wizard-content">
                        <!-- Step 1: Basics -->
                        <div class="wizard-step active" id="wizard-step-1">
                            <div class="form-group">
                                <label>Campaign Name</label>
                                <input type="text" id="wiz-name" placeholder="e.g. Weekly Flash Sale">
                            </div>
                            <div class="form-group checkbox-group">
                                <input type="checkbox" id="wiz-use-custom" onchange="toggleWizCustom(this)">
                                <label for="wiz-use-custom">Overrride Global Business Profile</label>
                            </div>
                            <div id="wiz-custom-profile" class="slide-down-panel" style="display:none;">
                                <div class="form-group">
                                    <input type="text" id="wiz-product" placeholder="Specific Product Info">
                                </div>
                                <div class="form-group">
                                    <input type="text" id="wiz-audience" placeholder="Specific Audience">
                                </div>
                            </div>
                        </div>

                        <!-- Step 2: Time -->
                        <div class="wizard-step" id="wizard-step-2">
                            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                            <div class="time-grid">
                                <div class="time-input">
                                    <span>Morning</span>
                                    <input type="time" id="wiz-time-morning" value="07:00">
                                </div>
                                <div class="time-input">
                                    <span>Afternoon</span>
                                    <input type="time" id="wiz-time-afternoon" value="13:00">
                                </div>
                                <div class="time-input">
                                    <span>Evening</span>
                                    <input type="time" id="wiz-time-evening" value="19:00">
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: Audience (Target Groups) -->
                        <div class="wizard-step" id="wizard-step-3">
                            <div id="wiz-groups-list" class="selectable-list">
                                <p>Loading groups...</p>
                            </div>
                        </div>

                        <!-- Step 4: Review -->
                        <div class="wizard-step" id="wizard-step-4">
                            <div class="review-card">
                                <h3 id="review-name">Campaign Name</h3>
                                <p id="review-schedule">Schedule: 7am, 1pm, 7pm</p>
                                <p id="review-groups">Targeting: All Groups</p>
                            </div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button class="btn-text" id="wiz-prev-btn" onclick="wizardBack()"
                            style="visibility:hidden">Back</button>
                        <button class="btn-primary" id="wiz-next-btn" onclick="wizardNext()">Next</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. Audience Manager Overlay -->
        <div id="audience-manager-overlay" class="modal-overlay">
            <div class="glass-modal">
                <div class="modal-header">
                    <h2>Audience Groups</h2>
                    <button class="btn-close" onclick="closeAudienceManager()">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="toolbar">
                        <button class="btn-secondary" onclick="refreshGroups()">Refresh WhatsApp Groups</button>
                    </div>
                    <div id="audience-list-full" class="full-list-view">
                        <!-- Full list populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. Brand Profile Modal -->
        <div id="brand-profile-modal" class="modal-overlay">
            <div class="glass-modal medium-modal">
                <div class="modal-header">
                    <h2>Edit Global Brand Profile</h2>
                    <button class="btn-close" onclick="closeBrandProfile()">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Product/Service</label>
                        <textarea id="modal-brand-product" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Target Audience</label>
                        <textarea id="modal-brand-audience" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label>USP</label>
                        <textarea id="modal-brand-usp" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Brand Voice</label>
                        <select id="modal-brand-voice">
                            <option value="professional">Professional</option>
                            <option value="friendly">Friendly</option>
                            <option value="luxury">Luxury</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-primary" onclick="saveBrandProfileFromModal()">Save Profile</button>
                </div>
            </div>
        </div>

    </div>
    </main>
    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
        <a href="#" class="mobile-nav-item active" data-page="dashboard">
            <div class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" />
                </svg>
            </div>
            <span>Home</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="chats">
            <div class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" />
                </svg>
                <span class="mobile-badge" id="mobile-chat-count" style="display: none;">0</span>
            </div>
            <span>Chats</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="contacts">
            <div class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                </svg>
            </div>
            <span>People</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="marketing">
            <div class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zm6-4a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zm6-3a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />
                </svg>
            </div>
            <span>Market</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="shops">
            <div class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z" />
                </svg>
            </div>
            <span>Shop</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="communities">
            <div class="nav-icon">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
            </div>
            <span>Groups</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="analytics">
            <div class="nav-icon">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z">
                    </path>
                </svg>
            </div>
            <span>Data</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="ai-profile">
            <div class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M13 7H7v6h6V7z" />
                    <path fill-rule="evenodd"
                        d="M7 2a1 1 0 012 0v1h2V2a1 1 0 112 0v1h2a2 2 0 012 2v2h1a1 1 0 110 2h-1v2h1a1 1 0 110 2h-1v2a2 2 0 01-2 2h-2v1a1 1 0 11-2 0v-1H9v1a1 1 0 11-2 0v-1H5a2 2 0 01-2-2v-2H2a1 1 0 110-2h1V9H2a1 1 0 010-2h1V5a2 2 0 012-2h2V2zM5 5h10v10H5V5z"
                        clip-rule="evenodd" />
                </svg>
            </div>
            <span>AI</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="user-profile">
            <div class="nav-icon">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                        clip-rule="evenodd" />
                </svg>
            </div>
            <span>Me</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="settings">
            <div class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M19.43 12.98c.04-.32.07-.64.07-98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.5.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z" />
                </svg>
            </div>
            <span>Settings</span>
        </a>
    </nav>
    </div>

    <!-- Create Shop Modal -->
    <!-- Collection Type Selection Modal -->
    <div id="collectionTypeModal" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h3>Create New Collection</h3>
                <button class="close-modal" onclick="closeCollectionTypeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 2rem;">
                    Choose the type of collection you want to create.
                </p>

                <div class="collection-type-grid">
                    <!-- Retail Shop Option -->
                    <div class="collection-type-card" onclick="selectCollectionType('shop')">
                        <div class="collection-type-icon">üè™</div>
                        <span class="collection-type-badge shop">Commerce</span>
                        <h4>Retail Shop</h4>
                        <p>Perfect for selling physical or digital products. Manage inventory, prices, and orders.</p>
                        <div class="collection-type-features">
                            <span>Product Catalog</span>
                            <span>Stock Management</span>
                            <span>Price Tracking</span>
                        </div>
                    </div>

                    <!-- Career Portfolio Option -->
                    <div class="collection-type-card" onclick="selectCollectionType('career')">
                        <div class="collection-type-icon">üíº</div>
                        <span class="collection-type-badge career">Personal</span>
                        <h4>Career Portfolio</h4>
                        <p>Showcase your skills, projects, and professional experience to potential employers.</p>
                        <div class="collection-type-features">
                            <span>Project Showcase</span>
                            <span>Skill Listing</span>
                            <span>No Pricing/Stock</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Shop/Portfolio Modal (Dynamic) -->
    <div id="createShopModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="createModalTitle">Create New Shop</h3>
                <button class="close-modal" onclick="closeCreateShopModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="createShopForm" onsubmit="handleCreateShop(event)">
                    <input type="hidden" id="collectionType" value="shop">

                    <div class="form-group">
                        <label id="nameLabel">Shop Name</label>
                        <input type="text" id="shopName" required placeholder="e.g. My Awesome Store">
                        <small id="nameHint">Give your shop a catchy name</small>
                    </div>

                    <div class="form-group">
                        <label id="descLabel">Description</label>
                        <textarea id="shopDescription" required placeholder="What do you sell?"></textarea>
                        <small id="descHint">Describe what you offer</small>
                    </div>

                    <div class="form-group">
                        <label>Icon / Emoji</label>
                        <input type="text" id="shopEmoji" value="üè™" style="width: 50px; text-align: center;">
                    </div>

                    <div class="modal-actions"
                        style="display: flex; justify-content: flex-end; gap: 1rem; margin-top: 1.5rem;">
                        <button type="button" class="btn-secondary" onclick="closeCreateShopModal()">Cancel</button>
                        <button type="submit" class="btn-primary" id="createSubmitBtn">Create Shop</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Group Analytics Modal -->
    <div id="groupAnalyticsModal" class="modal" style="display: none;">
        <div class="modal-content large-modal" style="max-width: 900px; width: 90%;">
            <div class="modal-header">
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <div class="avatar-md" id="ga-avatar">G</div>
                    <div>
                        <h3 id="ga-subject" style="margin: 0;">Group Name</h3>
                        <small id="ga-jid" class="text-muted">jid@g.us</small>
                    </div>
                </div>
                <button class="close-modal" onclick="closeGroupAnalyticsModal()">&times;</button>
            </div>
            <div class="modal-body scrollable-content" style="max-height: 80vh; overflow-y: auto;">

                <!-- KPI Grid -->
                <div class="analytics-grid" style="grid-template-columns: repeat(5, 1fr); margin-bottom: 2rem;">
                    <div class="analytics-card">
                        <h5>üë• Members</h5>
                        <div class="value" id="ga-members">-</div>
                    </div>
                    <div class="analytics-card">
                        <h5>üõ°Ô∏è Admins</h5>
                        <div class="value" id="ga-admins">-</div>
                    </div>
                    <div class="analytics-card">
                        <h5>üì¢ Read Rate</h5>
                        <div class="value" id="ga-read-rate">-</div>
                    </div>
                    <div class="analytics-card">
                        <h5>üí¨ Replies</h5>
                        <div class="value" id="ga-replies">-</div>
                    </div>
                    <div class="analytics-card">
                        <h5>ü§ñ Bot Age</h5>
                        <div class="value" id="ga-bot-age">-</div>
                    </div>
                </div>

                <!-- Charts -->
                <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem; margin-bottom: 2rem;">
                    <div class="chart-container">
                        <h4>Engagement Overview</h4>
                        <canvas id="gaEngagementChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h4>Member Composition</h4>
                        <canvas id="gaRoleChart"></canvas>
                    </div>
                </div>

                <!-- Member Table -->
                <div class="table-container">
                    <h4>Top Members / Admins</h4>
                    <table class="analytics-table">
                        <thead>
                            <tr>
                                <th>Phone</th>
                                <th>Role</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="ga-members-body">
                            <!-- JS Populated -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

</body>

</html>