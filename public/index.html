<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>WhatsApp Representative Agent - Dashboard</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="stylesheet" href="/styles_mobile.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:wght@600;700;900&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- Animated Background -->
        <div class="animated-bg">
            <div class="orb orb-1"></div>
            <div class="orb orb-2"></div>
            <div class="orb orb-3"></div>
        </div>

        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                        <circle cx="20" cy="20" r="18" fill="url(#gradient)" />
                        <path
                            d="M20 10C14.48 10 10 14.48 10 20C10 21.82 10.5 23.52 11.36 25L10 30L15.18 28.66C16.6 29.44 18.25 29.9 20 29.9C25.52 29.9 30 25.42 30 19.9C30 14.38 25.52 10 20 10Z"
                            fill="white" />
                        <defs>
                            <linearGradient id="gradient" x1="0" y1="0" x2="40" y2="40">
                                <stop offset="0%" stop-color="#667eea" />
                                <stop offset="100%" stop-color="#764ba2" />
                            </linearGradient>
                        </defs>
                    </svg>
                    <div class="logo-text">
                        <h1>Representative</h1>
                        <p>AI Agent</p>
                    </div>
                </div>
                <!-- Theme Toggle -->
                <button id="theme-toggle" class="theme-toggle" aria-label="Toggle Theme">
                    <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z" />
                    </svg>
                    <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                        style="display: none;">
                        <path
                            d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,18.55,13.59,21.5,9,21.5 c-5.52,0-10-4.48-10-10C-1,6.91,1.95,3.05,5.51,1.51C5.51,1.51,5.51,1.51,5.51,1.51C5.63,2.71,6.95,4.04,9.37,5.51z M17,2 c0,1.94,2.16,3,1.35,5.17C20.84,5.84,23,3.94,23,2C23,2,17,2,17,2z" />
                    </svg>
                </button>
            </div>

            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-page="dashboard">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path
                            d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                    </svg>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-page="chats">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z" />
                        <path
                            d="M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z" />
                    </svg>
                    <span>Chats</span>
                    <span class="badge" id="chat-count">0</span>
                </a>
                <a href="#" class="nav-item" data-page="contacts">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path
                            d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" />
                    </svg>
                    <span>Contacts</span>
                </a>
                <a href="#" class="nav-item" data-page="marketing">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path
                            d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zm6-4a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zm6-3a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />
                    </svg>
                    <span>Marketing</span>
                </a>
                <a href="#" class="nav-item" data-page="communities">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    <span>Communities</span>
                </a>
                <a href="#" class="nav-item" data-page="ai-profile">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M13 7H7v6h6V7z" />
                        <path fill-rule="evenodd"
                            d="M7 2a1 1 0 012 0v1h2V2a1 1 0 112 0v1h2a2 2 0 012 2v2h1a1 1 0 110 2h-1v2h1a1 1 0 110 2h-1v2a2 2 0 01-2 2h-2v1a1 1 0 11-2 0v-1H9v1a1 1 0 11-2 0v-1H5a2 2 0 01-2-2v-2H2a1 1 0 110-2h1V9H2a1 1 0 010-2h1V5a2 2 0 012-2h2V2zM5 5h10v10H5V5z"
                            clip-rule="evenodd" />
                    </svg>
                    <span>AI Profile</span>
                </a>
                <a href="#" class="nav-item" data-page="user-profile">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                            clip-rule="evenodd" />
                    </svg>
                    <span>My Profile</span>
                </a>
                <a href="#" class="nav-item" data-page="settings">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z"
                            clip-rule="evenodd" />
                    </svg>
                    <span>Settings</span>
                </a>
            </nav>

            <div class="sidebar-footer">
                <div class="connection-status" id="connection-status">
                    <div class="status-indicator"></div>
                    <div class="status-text">
                        <span class="status-label">Connecting...</span>
                        <span class="status-detail">Initializing</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div class="page active" id="dashboard-page">
                <header class="page-header">
                    <h2>Dashboard</h2>
                    <button class="btn-refresh" id="refresh-btn">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd"
                                d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                                clip-rule="evenodd" />
                        </svg>
                    </button>
                </header>

                <!-- QR Code Section -->
                <div class="qr-section" id="qr-section" style="display: none;">
                    <div class="qr-card">
                        <div class="qr-header">
                            <h3>Scan QR Code to Connect</h3>
                            <p>Open WhatsApp on your phone and scan this code</p>
                        </div>
                        <div class="qr-code-container" id="qr-code">
                            <div class="qr-loader">
                                <div class="spinner"></div>
                                <p>Generating QR Code...</p>
                            </div>
                        </div>
                        <div class="quick-actions-row">
                            <button class="action-card-btn" onclick="openSimpleCampaignModal()">
                                <div class="action-icon">üöÄ</div>
                                <span class="action-title">Create Campaign</span>
                                <span class="action-desc">Launch automated marketing</span>
                            </button>
                            <button class="action-card-btn" onclick="switchMiniTab('audience')">
                                <div class="action-icon">üë•</div>
                                <span class="action-title">Manage Groups</span>
                                <span class="action-desc">Select target audience</span>
                            </button>
                            <button class="action-card-btn" onclick="switchMiniTab('settings')">
                                <div class="action-icon">‚öôÔ∏è</div>
                                <span class="action-title">Brand Profile</span>
                                <span class="action-desc">Update identity</span>
                            </button>
                        </div>
                        <div class="qr-instructions">
                            <div class="instruction-step">
                                <span class="step-number">1</span>
                                <p>Open WhatsApp on your phone</p>
                            </div>
                            <div class="instruction-step">
                                <span class="step-number">2</span>
                                <p>Tap Menu or Settings and select Linked Devices</p>
                            </div>
                            <div class="instruction-step">
                                <span class="step-number">3</span>
                                <p>Tap on Link a Device</p>
                            </div>
                            <div class="instruction-step">
                                <span class="step-number">4</span>
                                <p>Point your phone at this screen to scan the code</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Stats Grid -->
                <div class="stats-grid" id="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                <path
                                    d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Total Messages</p>
                            <h3 class="stat-value" id="total-messages">0</h3>
                            <span class="stat-change positive">+12% from last week</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                <path
                                    d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Active Contacts</p>
                            <h3 class="stat-value" id="active-contacts">0</h3>
                            <span class="stat-change positive">+5 new this week</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Response Rate</p>
                            <h3 class="stat-value">98%</h3>
                            <span class="stat-change positive">Excellent</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <div class="stat-content">
                            <p class="stat-label">Avg Response Time</p>
                            <h3 class="stat-value">12s</h3>
                            <span class="stat-change positive">-3s improvement</span>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="activity-section">
                    <h3>Recent Activity</h3>
                    <div class="activity-list" id="activity-list">
                        <div class="activity-empty">
                            <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                                <circle cx="32" cy="32" r="32" fill="#f3f4f6" />
                                <path d="M32 20v24M20 32h24" stroke="#9ca3af" stroke-width="2" stroke-linecap="round" />
                            </svg>
                            <p>No recent activity</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chats Page -->
            <div class="page" id="chats-page">
                <header class="page-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                        </button>
                        <h2>Conversations</h2>
                    </div>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <div class="search-box">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                    clip-rule="evenodd" />
                            </svg>
                            <input type="text" placeholder="Search conversations..." id="chat-search">
                        </div>
                        <button class="btn-refresh" id="refresh-chats-btn" aria-label="Refresh Chats">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                                    clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </header>

                <div class="chats-container">
                    <div class="chat-list" id="chat-list">
                        <div class="chat-empty">
                            <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                                <circle cx="32" cy="32" r="32" fill="#f3f4f6" />
                                <path d="M20 28h24M20 36h16" stroke="#9ca3af" stroke-width="2" stroke-linecap="round" />
                            </svg>
                            <p>No conversations yet</p>
                        </div>
                    </div>
                    <div class="chat-detail" id="chat-detail">
                        <div class="chat-detail-empty">
                            <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                                <circle cx="40" cy="40" r="40" fill="#f3f4f6" />
                                <path d="M30 35h20M30 45h14" stroke="#9ca3af" stroke-width="2" stroke-linecap="round" />
                            </svg>
                            <h3>Select a conversation</h3>
                            <p>Choose a chat from the list to view messages</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contacts Page -->
            <div class="page" id="contacts-page">
                <header class="page-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                        </button>
                        <h2>Contacts</h2>
                    </div>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <div class="search-box">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                    clip-rule="evenodd" />
                            </svg>
                            <input type="text" placeholder="Search contacts..." id="contact-search">
                        </div>
                        <button class="btn-refresh" id="refresh-contacts-btn" aria-label="Refresh Contacts">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                                    clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </header>

                <div class="contacts-grid" id="contacts-grid">
                    <div class="contacts-empty">
                        <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                            <circle cx="32" cy="32" r="32" fill="#f3f4f6" />
                            <circle cx="32" cy="26" r="8" stroke="#9ca3af" stroke-width="2" />
                            <path d="M20 50c0-6.627 5.373-12 12-12s12 5.373 12 12" stroke="#9ca3af" stroke-width="2"
                                stroke-linecap="round" />
                        </svg>
                        <p>No contacts yet</p>
                    </div>
                </div>
            </div>

            <!-- Communities Page -->
            <div class="page" id="communities-page">
                <header class="page-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                        </button>
                        <h2>Communities</h2>
                    </div>
                    <div style="display: flex; gap: 1rem; align-items: center;">
                        <div class="search-box">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                    clip-rule="evenodd" />
                            </svg>
                            <input type="text" placeholder="Search groups..." id="communities-search"
                                onkeyup="filterCommunities()">
                        </div>
                        <button class="btn-refresh" onclick="loadCommunities()" aria-label="Refresh Communities">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd"
                                    d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                                    clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </header>

                <div class="stats-grid">
                    <div class="stat-card">
                        <p class="stat-label">Total Groups</p>
                        <h3 class="stat-value" id="comm-total-count">0</h3>
                    </div>
                    <div class="stat-card">
                        <p class="stat-label">Total Reach</p>
                        <h3 class="stat-value" id="comm-total-reach">0</h3>
                        <span class="stat-change positive">Potential Audience</span>
                    </div>
                </div>

                <div class="marketing-list-section">
                    <div id="communities-list" class="marketing-list">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div class="page" id="settings-page">
                <header class="page-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                        </button>
                        <h2>‚öôÔ∏è Settings</h2>
                    </div>
                </header>

                <div class="settings-container">
                    <!-- Appearance Section -->
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <div class="settings-icon"
                                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z" />
                                </svg>
                            </div>
                            <div>
                                <h3>Appearance</h3>
                                <p>Customize how the app looks</p>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6;">
                                        <path
                                            d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8z" />
                                    </svg>
                                    <div>
                                        <label>Theme Mode</label>
                                        <p>Switch between light and dark theme</p>
                                    </div>
                                </div>
                            </div>
                            <button id="mobile-theme-toggle" class="theme-toggle-btn">
                                <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z" />
                                </svg>
                                <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                    style="display: none;">
                                    <path
                                        d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,18.55,13.59,21.5,9,21.5 c-5.52,0-10-4.48-10-10C-1,6.91,1.95,3.05,5.51,1.51C5.51,1.51,5.51,1.51,5.51,1.51C5.63,2.71,6.95,4.04,9.37,5.51z M17,2 c0,1.94,2.16,3,1.35,5.17C20.84,5.84,23,3.94,23,2C23,2,17,2,17,2z" />
                                </svg>
                            </button>
                        </div>
                    </div>

                    <!-- Connection Section -->
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <div class="settings-icon"
                                style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M1 9l2 2c4.97-4.97 13.03-4.97 18 0l2-2C16.93 2.93 7.08 2.93 1 9zm8 8l3 3 3-3c-1.65-1.66-4.34-1.66-6 0zm-4-4l2 2c2.76-2.76 7.24-2.76 10 0l2-2C15.14 9.14 8.87 9.14 5 13z" />
                                </svg>
                            </div>
                            <div>
                                <h3>Connection</h3>
                                <p>WhatsApp connection details</p>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6;">
                                        <path
                                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                                    </svg>
                                    <div>
                                        <label>WhatsApp Status</label>
                                        <p>Current connection status</p>
                                    </div>
                                </div>
                            </div>
                            <span class="setting-badge" id="settings-status">Checking...</span>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6;">
                                        <path
                                            d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z" />
                                    </svg>
                                    <div>
                                        <label>Phone Number</label>
                                        <p>Connected WhatsApp number</p>
                                    </div>
                                </div>
                            </div>
                            <span class="setting-badge" id="settings-phone">Not connected</span>
                        </div>
                    </div>

                    <!-- Notifications Section -->
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <div class="settings-icon"
                                style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path
                                        d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z" />
                                </svg>
                            </div>
                            <div>
                                <h3>Notifications</h3>
                                <p>Manage notification preferences</p>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6;">
                                        <path
                                            d="M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z" />
                                    </svg>
                                    <div>
                                        <label>Desktop Notifications</label>
                                        <p>Get notified of new messages</p>
                                    </div>
                                </div>
                            </div>
                            <label class="toggle">
                                <input type="checkbox" id="desktop-notifications">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6;">
                                        <path
                                            d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
                                    </svg>
                                    <div>
                                        <label>Sound Alerts</label>
                                        <p>Play sound for new messages</p>
                                    </div>
                                </div>
                            </div>
                            <label class="toggle">
                                <input type="checkbox" id="sound-alerts">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>


                    <!-- System Configuration Section -->
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <div class="settings-icon"
                                style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" />
                                </svg>
                            </div>
                            <div>
                                <h3>System Configuration</h3>
                                <p>Advanced system settings</p>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6;">
                                        <path
                                            d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" />
                                    </svg>
                                    <div>
                                        <label>Batch Buffer Window (ms)</label>
                                        <p>Wait time before processing messages</p>
                                    </div>
                                </div>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <input type="number" id="batch-window-input" placeholder="30000"
                                    style="width: 100px; padding: 8px; border-radius: 8px; border: 1px solid rgba(0,0,0,0.1); background: var(--card-bg);">
                                <button id="save-batch-window-btn" class="btn-primary"
                                    style="padding: 8px 16px; font-size: 0.9rem;">Save</button>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6;">
                                        <path
                                            d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z" />
                                    </svg>
                                    <div>
                                        <label>Database Migrations</label>
                                        <p>Apply schema updates to database</p>
                                    </div>
                                </div>
                            </div>
                            <button id="run-migration-btn" class="btn-primary"
                                style="background: #f59e0b; border: none;">Run Migrations</button>
                        </div>
                    </div>

                    <!-- Danger Zone Section -->
                    <div class="settings-section danger-section">
                        <div class="settings-section-header">
                            <div class="settings-icon"
                                style="background: linear-gradient(135deg, #f43f5e 0%, #dc2626 100%);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" />
                                </svg>
                            </div>
                            <div>
                                <h3>Danger Zone</h3>
                                <p>Irreversible actions</p>
                            </div>
                        </div>

                        <div class="setting-item">
                            <div class="setting-info">
                                <div class="setting-label">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
                                        style="opacity: 0.6; color: var(--danger);">
                                        <path
                                            d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z" />
                                    </svg>
                                    <div>
                                        <label>Disconnect WhatsApp</label>
                                        <p>Log out from this device</p>
                                    </div>
                                </div>
                            </div>
                            <button class="btn-danger" id="disconnect-btn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z" />
                                </svg>
                                Disconnect
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Profile Page -->
            <div class="page" id="ai-profile-page">
                <header class="page-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                        </button>
                        <h2>ü§ñ AI Agent Profile</h2>
                    </div>
                    <button class="btn-primary" id="save-ai-profile">Save Changes</button>
                </header>

                <div class="profile-container">
                    <div class="profile-section">
                        <h3>Agent Identity</h3>
                        <div class="form-group">
                            <label>Agent Name</label>
                            <input type="text" id="agent-name" placeholder="Representative">
                            <small>The name your AI agent will use</small>
                        </div>
                        <div class="form-group">
                            <label>Agent Role</label>
                            <input type="text" id="agent-role" placeholder="Personal Assistant">
                            <small>What role does your agent play?</small>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h3>Personality & Style</h3>
                        <div class="form-group">
                            <label>Personality Traits</label>
                            <textarea id="personality-traits" rows="3"
                                placeholder="Professional, helpful, and efficient"></textarea>
                            <small>Describe how the AI should behave</small>
                        </div>
                        <div class="form-group">
                            <label>Communication Style</label>
                            <textarea id="communication-style" rows="2"
                                placeholder="Friendly yet professional"></textarea>
                            <small>How should the AI communicate?</small>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h3>Custom System Prompt</h3>
                        <div class="form-group">
                            <label>System Prompt Override (Advanced)</label>
                            <textarea id="system-prompt" rows="6"
                                placeholder="Leave empty to use default prompt..."></textarea>
                            <small>‚ö†Ô∏è Advanced: Override the default AI instructions</small>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h3>Behavior Settings</h3>
                        <div class="form-group">
                            <label>Response Length</label>
                            <select id="response-length">
                                <option value="short">Short & Concise</option>
                                <option value="medium" selected>Medium</option>
                                <option value="long">Detailed & Comprehensive</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Formality Level: <span id="formality-value">5</span>/10</label>
                            <input type="range" id="formality-level" min="1" max="10" value="5">
                            <div class="range-labels">
                                <span>Casual</span>
                                <span>Formal</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="use-emojis" checked>
                                <span>Use Emojis in Responses</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- User Profile Page -->
            <div class="page" id="user-profile-page">
                <header class="page-header">
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                            </svg>
                        </button>
                        <h2>üë§ Your Profile</h2>
                    </div>
                    <button class="btn-primary" id="save-user-profile">Save Changes</button>
                </header>

                <div class="profile-container">
                    <div class="profile-section">
                        <h3>Personal Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Full Name</label>
                                <input type="text" id="user-full-name" placeholder="John Doe">
                            </div>
                            <div class="form-group">
                                <label>System Owner Phone</label>
                                <div style="display: flex; gap: 8px; align-items: center;">
                                    <input type="text" id="system-owner-phone" placeholder="+254700000000"
                                        style="flex: 1;">
                                    <button id="save-owner-phone-btn" class="btn-primary"
                                        style="padding: 8px 16px; font-size: 0.9rem; white-space: nowrap;">Save</button>
                                </div>
                                <small>This is the trusted owner number. Changes take effect immediately.</small>
                            </div>
                            <div class="form-group">
                                <label>Preferred Name</label>
                                <input type="text" id="user-preferred-name" placeholder="John">
                                <small>How should the AI address you?</small>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Title/Position</label>
                                <input type="text" id="user-title" placeholder="CEO">
                            </div>
                            <div class="form-group">
                                <label>Company</label>
                                <input type="text" id="user-company" placeholder="Acme Corp">
                            </div>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h3>Contact Information</h3>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" id="user-email" placeholder="john@acme.com">
                            </div>
                            <div class="form-group">
                                <label>Phone</label>
                                <input type="tel" id="user-phone" placeholder="+1234567890">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Location</label>
                                <input type="text" id="user-location" placeholder="New York, USA">
                            </div>
                            <div class="form-group">
                                <label>Timezone</label>
                                <div class="timezone-picker-wrapper">
                                    <input type="text" id="timezone-search" placeholder="Search for a city..."
                                        autocomplete="off">
                                    <input type="hidden" id="user-timezone">
                                    <div class="timezone-dropdown" id="timezone-dropdown">
                                        <div class="timezone-dropdown-header">
                                            <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                                                <path fill-rule="evenodd"
                                                    d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                                    clip-rule="evenodd" />
                                            </svg>
                                            <span>Select your city</span>
                                        </div>
                                        <div class="timezone-list" id="timezone-list">
                                            <!-- Populated by JavaScript -->
                                        </div>
                                    </div>
                                </div>
                                <small class="timezone-display" id="timezone-display"></small>
                            </div>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h3>Professional Context</h3>
                        <div class="form-group">
                            <label>Industry</label>
                            <input type="text" id="user-industry" placeholder="Technology">
                        </div>
                        <div class="form-group">
                            <label>Role Description</label>
                            <textarea id="user-role" rows="3" placeholder="Describe what you do..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>Key Responsibilities</label>
                            <textarea id="user-responsibilities" rows="3"
                                placeholder="What are your main responsibilities?"></textarea>
                        </div>
                    </div>

                    <div class="profile-section">
                        <h3>Availability & Preferences</h3>
                        <div class="form-group">
                            <label>Working Hours</label>
                            <input type="text" id="user-working-hours" placeholder="9 AM - 5 PM EST">
                        </div>
                        <div class="form-group">
                            <label>Priorities</label>
                            <textarea id="user-priorities" rows="2" placeholder="What matters most to you?"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Background Info (for AI context)</label>
                            <textarea id="user-background" rows="4"
                                placeholder="Any additional context that helps the AI understand you better..."></textarea>
                            <small>This information helps the AI provide more personalized responses</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Marketing Page (Premium Design) -->
            <div class="page" id="marketing-page">
                <!-- Animated Background -->
                <div class="marketing-animated-bg">
                    <div class="marketing-orb marketing-orb-1"></div>
                    <div class="marketing-orb marketing-orb-2"></div>
                    <div class="marketing-orb marketing-orb-3"></div>
                </div>

                <div class="marketing-app-container">
                    <!-- Marketing Sidebar -->
                    <aside class="marketing-sidebar">
                        <div class="marketing-brand">
                            <div class="marketing-brand-title">Representative</div>
                            <div class="marketing-brand-subtitle">AI AGENT</div>
                        </div>

                        <nav class="marketing-nav-menu">
                            <div class="marketing-nav-item" onclick="switchPage('dashboard')">
                                <svg class="marketing-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                                </svg>
                                <span>Dashboard</span>
                            </div>

                            <div class="marketing-nav-item" onclick="switchPage('chats')">
                                <svg class="marketing-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                                </svg>
                                <span>Chats</span>
                                <span class="marketing-badge" id="marketing-chat-count">8</span>
                            </div>

                            <div class="marketing-nav-item" onclick="switchPage('contacts')">
                                <svg class="marketing-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                                </svg>
                                <span>Contacts</span>
                            </div>

                            <div class="marketing-nav-item marketing-nav-item-active">
                                <svg class="marketing-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z" />
                                </svg>
                                <span>Marketing</span>
                            </div>

                            <div class="marketing-nav-item" onclick="switchPage('ai-profile')">
                                <svg class="marketing-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                </svg>
                                <span>AI Profile</span>
                            </div>

                            <div class="marketing-nav-item" onclick="switchPage('user-profile')">
                                <svg class="marketing-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                </svg>
                                <span>My Profile</span>
                            </div>

                            <div class="marketing-nav-item" onclick="switchPage('settings')">
                                <svg class="marketing-nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                                </svg>
                                <span>Settings</span>
                            </div>
                        </nav>

                        <div class="marketing-connection-status">
                            <div class="marketing-status-indicator">
                                <span class="marketing-status-dot"></span>
                                <span>Disconnected</span>
                            </div>
                        </div>
                    </aside>

                    <!-- Main Content -->
                    <main class="marketing-main-content">
                        <header class="marketing-header">
                            <div class="marketing-header-top">
                                <div>
                                    <h1 class="marketing-page-title">Marketing Command Center</h1>
                                    <p class="marketing-header-subtitle">Manage automated campaigns & audience targeting
                                    </p>
                                </div>
                                <button class="marketing-btn-primary" onclick="openSimpleCampaignModal()">
                                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M12 4v16m8-8H4" />
                                    </svg>
                                    New Campaign
                                </button>
                            </div>
                        </header>


                        <!-- Stats Grid -->
                        <div class="marketing-stats-grid">
                            <div class="marketing-stat-card">
                                <div class="marketing-stat-icon">
                                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </div>
                                <div class="marketing-stat-label">Active Campaigns</div>
                                <div class="marketing-stat-value" id="mini-active-count">0</div>
                                <div class="marketing-stat-trend">
                                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                                    </svg>
                                    <span>Running</span>
                                </div>
                            </div>

                            <div class="marketing-stat-card">
                                <div class="marketing-stat-icon">
                                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                                    </svg>
                                </div>
                                <div class="marketing-stat-label">Audience Reach</div>
                                <div class="marketing-stat-value" id="mini-reach-count">0</div>
                                <div class="marketing-stat-trend">
                                    <span>Potential</span>
                                </div>
                            </div>

                            <div class="marketing-stat-card">
                                <div class="marketing-stat-icon">
                                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </div>
                                <div class="marketing-stat-label">Next Post</div>
                                <div class="marketing-stat-value" id="mini-next-slot">--:--</div>
                                <div class="marketing-stat-trend">
                                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                    <span>Upcoming</span>
                                </div>
                            </div>

                            <div class="marketing-stat-card">
                                <div class="marketing-stat-icon">
                                    <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
                                    </svg>
                                </div>
                                <div class="marketing-stat-label">Campaign Quality</div>
                                <div class="marketing-stat-value" style="font-size: 2rem;">--</div>
                                <div class="marketing-stat-trend">
                                    <span>Professional</span>
                                </div>
                            </div>
                        </div>

                        <!-- Content Grid -->
                        <div class="marketing-content-grid">
                            <!-- Recent Campaigns -->
                            <div class="marketing-card marketing-card-full">
                                <div class="marketing-card-header">
                                    <div>
                                        <h2 class="marketing-card-title">Active Campaigns</h2>
                                        <p class="marketing-card-subtitle">Manage and monitor your automated campaigns
                                        </p>
                                    </div>
                                    <button class="marketing-btn-secondary" onclick="refreshCampaigns()">
                                        <svg width="16" height="16" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                                        </svg>
                                        Refresh
                                    </button>
                                </div>
                                <div id="mini-campaigns-list" class="marketing-campaigns-container">
                                    <div class="marketing-empty-state">
                                        <div class="marketing-empty-icon">üìä</div>
                                        <p class="marketing-empty-title">No campaigns yet</p>
                                        <p class="marketing-empty-desc">Create your first campaign to get started with
                                            automated marketing!</p>
                                    </div>
                                </div>
                            </div>




                            <!-- (Brand Identity Removed) -->

                        </div>

                        <!-- Hidden Mini Tabs Content (for backward compatibility) -->
                        <div style="display: none;">
                            <div id="view-dashboard" class="mini-view"></div>
                            <div id="view-campaigns" class="mini-view"></div>
                            <div id="view-audience" class="mini-view">
                                <div id="mini-groups-list" class="mini-list-grid scrollable-list">
                                    <p class="empty-text">Click Refresh to load groups...</p>
                                </div>
                            </div>
                            <div id="view-settings" class="mini-view"></div>
                        </div>
                    </main>
                </div>

                <!-- Campaign Modal -->
                <div class="marketing-modal-overlay" id="simple-campaign-modal">
                    <div class="marketing-modal">
                        <div class="marketing-modal-header">
                            <h3 class="marketing-modal-title">Create New Campaign</h3>
                            <button class="marketing-modal-close" onclick="closeSimpleCampaignModal()">√ó</button>
                        </div>
                        <div class="marketing-modal-body">
                            <!-- Step Indicator -->
                            <div class="marketing-step-indicator">
                                <div class="marketing-step marketing-step-active">
                                    <div class="marketing-step-number">1</div>
                                    <div class="marketing-step-label">Details</div>
                                </div>
                                <div class="marketing-step">
                                    <div class="marketing-step-number">2</div>
                                    <div class="marketing-step-label">Timing</div>
                                </div>
                                <div class="marketing-step">
                                    <div class="marketing-step-number">3</div>
                                    <div class="marketing-step-label">Audience</div>
                                </div>
                                <div class="marketing-step">
                                    <div class="marketing-step-number">4</div>
                                    <div class="marketing-step-label">Review</div>
                                </div>
                            </div>

                            <!-- Campaign Form -->
                            <form id="campaign-wizard-form">
                                <input type="hidden" id="mini-camp-id">

                                <!-- Step 1: Details -->
                                <div class="marketing-wizard-step" data-step="1">
                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">Campaign Name</label>
                                        <input type="text" id="mini-camp-name" class="marketing-form-input"
                                            placeholder="e.g. Summer Sale 2026">
                                    </div>

                                    <!-- Business Description (NEW) -->
                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">
                                            Describe Your Business
                                            <small
                                                style="color: var(--text-secondary); font-weight: normal; display: block; margin-top: 0.25rem;">
                                                Briefly explain what your business does, who it serves, and what makes
                                                it special
                                            </small>
                                        </label>
                                        <textarea id="mini-business-desc-raw" class="marketing-form-input" rows="3"
                                            placeholder="e.g., We sell handmade leather bags for professionals who value quality and style..."></textarea>
                                        <button type="button" class="marketing-btn-secondary" id="enhance-desc-btn"
                                            style="margin-top: 0.5rem; width: 100%;">
                                            ‚ú® Enhance with AI
                                        </button>
                                        <div id="enhanced-desc-container" style="display: none; margin-top: 1rem;">
                                            <label class="marketing-form-label">Enhanced Description
                                                (AI-Generated)</label>
                                            <div id="enhanced-desc-display"
                                                style="background: var(--bg-input); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-color); font-size: 0.875rem; line-height: 1.6; color: var(--text-primary);">
                                            </div>
                                            <input type="hidden" id="mini-business-desc" />
                                        </div>
                                    </div>

                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">Product/Service Info</label>
                                        <textarea id="mini-product-info" class="marketing-form-input" rows="3"
                                            placeholder="Describe what you are promoting..."></textarea>
                                    </div>
                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">Unique Selling Point</label>
                                        <input type="text" id="mini-usp" class="marketing-form-input"
                                            placeholder="Why should people buy?">
                                    </div>

                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">Company Link (Optional)</label>
                                        <input type="url" id="mini-company-link" class="marketing-form-input"
                                            placeholder="https://example.com">
                                        <small
                                            style="color: var(--text-secondary); display: block; margin-top: 0.25rem;">
                                            This link will be included at the end of every ad post.
                                        </small>
                                    </div>

                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">Brand Voice</label>
                                        <select id="mini-voice" class="marketing-form-input">
                                            <option value="professional">Professional</option>
                                            <option value="friendly">Friendly</option>
                                            <option value="urgent">Urgent</option>
                                            <option value="luxury">Luxury</option>
                                            <option value="playful">Playful</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- Step 2: Timing -->
                                <div class="marketing-wizard-step" data-step="2" style="display: none;">
                                    <p style="margin-bottom: 1rem; color: var(--text-secondary);">Set the times for your
                                        daily automated posts.</p>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                                        <div class="marketing-form-group">
                                            <label class="marketing-form-label">Morning</label>
                                            <input type="time" id="mini-time-m" class="marketing-form-input">
                                        </div>
                                        <div class="marketing-form-group">
                                            <label class="marketing-form-label">Afternoon</label>
                                            <input type="time" id="mini-time-a" class="marketing-form-input">
                                        </div>
                                        <div class="marketing-form-group">
                                            <label class="marketing-form-label">Evening</label>
                                            <input type="time" id="mini-time-e" class="marketing-form-input">
                                        </div>
                                    </div>
                                </div>

                                <div class="marketing-wizard-step" data-step="3" style="display: none;">
                                    <div class="marketing-form-group">
                                        <label class="marketing-form-label">Select Target Audience</label>
                                        <div id="modal-audience-list" class="marketing-list-grid scrollable-list">
                                            <p class="empty-text">Loading groups...</p>
                                        </div>
                                        <small
                                            style="color: var(--text-secondary); display: block; margin-top: 0.5rem;">Select
                                            groups to target specifically with this campaign.</small>
                                    </div>
                                </div>

                                <!-- Step 4: Review -->
                                <div class="marketing-wizard-step" data-step="4" style="display: none;">
                                    <div class="marketing-review-summary">
                                        <h4 style="margin-bottom: 1rem; color: var(--text-primary);">Campaign Summary
                                        </h4>
                                        <div
                                            style="background: var(--bg-input); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-color);">
                                            <p><strong>Name:</strong> <span id="review-name">--</span></p>
                                            <p><strong>Schedule:</strong> <span id="review-schedule">--</span></p>
                                            <p><strong>Audience:</strong> <span id="review-audience">--</span></p>
                                        </div>
                                    </div>
                                </div>

                                <div class="marketing-btn-group" style="margin-top: 1.5rem;">
                                    <button type="button" class="marketing-btn-secondary" id="btn-cancel"
                                        onclick="closeSimpleCampaignModal()">Cancel</button>

                                    <button type="button" class="marketing-btn-secondary" id="btn-back"
                                        onclick="prevWizardStep()" style="display: none;">Back</button>

                                    <button type="button" class="marketing-btn-primary" id="btn-next" style="flex: 1;"
                                        onclick="nextWizardStep()">
                                        Next
                                    </button>

                                    <button type="button" class="marketing-btn-primary" id="btn-submit"
                                        style="flex: 1; display: none;" onclick="submitMiniCampaign()">
                                        Create Campaign
                                        <svg width="16" height="16" fill="none" stroke="currentColor"
                                            viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M14 5l7 7m0 0l-7 7m7-7H3" />
                                        </svg>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

            </div>
            <!-- Marketing Tab -->
            <div class="marketing-tab-content active" id="marketing-tab-campaigns">
                <!-- Campaign List (Standard) -->
                <!-- ... content handled by app.js ... -->
            </div>

            <!-- (Other tabs hidden) -->
    </div>
    </div>
    </div>

    <!-- Communities Page (New) -->
    <div class="page" id="communities-page">
        <header class="page-header">
            <h2>Communities</h2>
            <div class="header-actions">
                <div class="search-bar">
                    <input type="text" id="communities-search" placeholder="Search groups..."
                        onkeyup="filterCommunities()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </div>
                <button class="btn-refresh" onclick="loadCommunities()">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"
                            clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
        </header>

        <div class="content-wrapper">
            <div class="communities-stats-row">
                <div class="stat-card mini">
                    <div class="stat-label">Total Groups</div>
                    <div class="stat-value" id="comm-total-count">0</div>
                </div>
                <div class="stat-card mini">
                    <div class="stat-label">Total Reach</div>
                    <div class="stat-value" id="comm-total-reach">0</div>
                </div>
            </div>

            <div id="communities-list" class="marketing-list-grid">
                <p class="empty-text">Loading communities...</p>
            </div>
        </div>
    </div>

    <!-- AI Profile Page -->
    <div class="page" id="ai-profile-page">
        <header class="page-header">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                    </svg>
                </button>
                <h2>ü§ñ AI Agent Profile</h2>
            </div>
            <button class="btn-primary" id="save-ai-profile">Save Changes</button>
        </header>

        <div class="profile-container">
            <div class="profile-section">
                <h3>Agent Identity</h3>
                <div class="form-group">
                    <label>Agent Name</label>
                    <input type="text" id="agent-name" placeholder="Representative">
                    <small>The name your AI agent will use</small>
                </div>
                <div class="form-group">
                    <label>Agent Role</label>
                    <input type="text" id="agent-role" placeholder="Personal Assistant">
                    <small>What role does your agent play?</small>
                </div>
            </div>

            <div class="profile-section">
                <h3>Personality & Style</h3>
                <div class="form-group">
                    <label>Personality Traits</label>
                    <textarea id="personality-traits" rows="3"
                        placeholder="Professional, helpful, and efficient"></textarea>
                    <small>Describe how the AI should behave</small>
                </div>
                <div class="form-group">
                    <label>Communication Style</label>
                    <textarea id="communication-style" rows="2" placeholder="Friendly yet professional"></textarea>
                    <small>How should the AI communicate?</small>
                </div>
            </div>

            <div class="profile-section">
                <h3>Custom System Prompt</h3>
                <div class="form-group">
                    <label>System Prompt Override (Advanced)</label>
                    <textarea id="system-prompt" rows="6" placeholder="Leave empty to use default prompt..."></textarea>
                    <small>‚ö†Ô∏è Advanced: Override the default AI instructions</small>
                </div>
            </div>

            <div class="profile-section">
                <h3>Behavior Settings</h3>
                <div class="form-group">
                    <label>Response Length</label>
                    <select id="response-length">
                        <option value="short">Short & Concise</option>
                        <option value="medium" selected>Medium</option>
                        <option value="long">Detailed & Comprehensive</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Formality Level: <span id="formality-value">5</span>/10</label>
                    <input type="range" id="formality-level" min="1" max="10" value="5">
                    <div class="range-labels">
                        <span>Casual</span>
                        <span>Formal</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="use-emojis" checked>
                        <span>Use Emojis in Responses</span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- User Profile Page -->
    <div class="page" id="user-profile-page">
        <header class="page-header">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back to Home">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                    </svg>
                </button>
                <h2>üë§ Your Profile</h2>
            </div>
            <button class="btn-primary" id="save-user-profile">Save Changes</button>
        </header>

        <div class="profile-container">
            <div class="profile-section">
                <h3>Personal Information</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" id="user-full-name" placeholder="John Doe">
                    </div>
                    <div class="form-group">
                        <label>Preferred Name</label>
                        <input type="text" id="user-preferred-name" placeholder="John">
                        <small>How should the AI address you?</small>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Title/Position</label>
                        <input type="text" id="user-title" placeholder="CEO">
                    </div>
                    <div class="form-group">
                        <label>Company</label>
                        <input type="text" id="user-company" placeholder="Acme Corp">
                    </div>
                </div>
            </div>

            <div class="profile-section">
                <h3>Contact Information</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="user-email" placeholder="john@acme.com">
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="tel" id="user-phone" placeholder="+1234567890">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Location</label>
                        <input type="text" id="user-location" placeholder="New York, USA">
                    </div>
                    <div class="form-group">
                        <label>Timezone</label>
                        <div class="timezone-picker-wrapper">
                            <input type="text" id="timezone-search" placeholder="Search for a city..."
                                autocomplete="off">
                            <input type="hidden" id="user-timezone">
                            <div class="timezone-dropdown" id="timezone-dropdown">
                                <div class="timezone-dropdown-header">
                                    <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd"
                                            d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                                            clip-rule="evenodd" />
                                    </svg>
                                    <span>Select your city</span>
                                </div>
                                <div class="timezone-list" id="timezone-list">
                                    <!-- Populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                        <small class="timezone-display" id="timezone-display"></small>
                    </div>
                </div>
            </div>

            <div class="profile-section">
                <h3>Professional Context</h3>
                <div class="form-group">
                    <label>Industry</label>
                    <input type="text" id="user-industry" placeholder="Technology">
                </div>
                <div class="form-group">
                    <label>Role Description</label>
                    <textarea id="user-role" rows="3" placeholder="Describe what you do..."></textarea>
                </div>
                <div class="form-group">
                    <label>Key Responsibilities</label>
                    <textarea id="user-responsibilities" rows="3"
                        placeholder="What are your main responsibilities?"></textarea>
                </div>
            </div>

            <div class="profile-section">
                <h3>Availability & Preferences</h3>
                <div class="form-group">
                    <label>Working Hours</label>
                    <input type="text" id="user-working-hours" placeholder="9 AM - 5 PM EST">
                </div>
                <div class="form-group">
                    <label>Priorities</label>
                    <textarea id="user-priorities" rows="2" placeholder="What matters most to you?"></textarea>
                </div>
                <div class="form-group">
                    <label>Background Info (for AI context)</label>
                    <textarea id="user-background" rows="4"
                        placeholder="Any additional context that helps the AI understand you better..."></textarea>
                    <small>This information helps the AI provide more personalized responses</small>
                </div>
            </div>
        </div>
    </div>
    <!-- Marketing Page (Redesigned) -->
    <div class="page" id="marketing-page">
        <!-- Dashboard Header -->
        <header class="marketing-header">
            <div class="header-left">
                <button class="btn-refresh" onclick="switchPage('dashboard')" aria-label="Back">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                    </svg>
                </button>
                <div>
                    <h2>Marketing Command Center</h2>
                    <p class="subtitle">Manage automated campaigns & audience targeting</p>
                </div>
            </div>
            <div class="header-right">
                <button class="btn-text" onclick="openAudienceManager()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                    </svg>
                    Audience
                </button>
                <button class="btn-primary" onclick="openCampaignWizard()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                    </svg>
                    New Campaign
                </button>
            </div>
        </header>

        <!-- Dashboard Stats Grid -->
        <div class="marketing-dashboard-grid">
            <div class="marketing-stat-card glass-panel">
                <div class="stat-icon-glow purple">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M7 12h2v5H7zm4-3h2v8h-2zm4-3h2v11h-2z" />
                    </svg>
                </div>
                <div class="stat-info">
                    <h3>Active Campaigns</h3>
                    <p class="stat-number" id="mkt-active-count">0</p>
                    <span class="stat-trend trend-neutral">--</span>
                </div>
            </div>

            <div class="marketing-stat-card glass-panel">
                <div class="stat-icon-glow pink">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                    </svg>
                </div>
                <div class="stat-info">
                    <h3>Audience Reach</h3>
                    <p class="stat-number" id="mkt-audience-reach">0</p>
                    <span class="stat-trend trend-up">Potential</span>
                </div>
            </div>

            <div class="marketing-stat-card glass-panel">
                <div class="stat-icon-glow blue">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z" />
                    </svg>
                </div>
                <div class="stat-info">
                    <h3>Next Post</h3>
                    <p class="stat-number minute-text" id="mkt-next-slot">--:--</p>
                    <span class="stat-trend">Upcoming</span>
                </div>
            </div>
        </div>

        <!-- Main Layout -->
        <div class="marketing-layout">
            <!-- Left: Campaigns Grid -->
            <div class="layout-main">
                <div class="section-title">
                    <h3>Recent Campaigns</h3>
                    <button class="btn-icon-sm" onclick="refreshCampaigns()" title="Refresh List">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
                        </svg>
                    </button>
                </div>
                <div id="campaigns-grid" class="campaigns-grid-modern">
                    <!-- Populated via JS -->
                    <div class="empty-state-card">
                        <p>Loading your campaigns...</p>
                    </div>
                </div>
            </div>

            <!-- Right: Brand & Quick Actions -->
            <aside class="layout-sidebar">
                <!-- Brand Identity Card -->
                <div class="brand-asset-card glass-panel">
                    <div class="card-header">
                        <h3>Brand Identity</h3>
                        <button class="btn-xs" onclick="openBrandProfile()">Edit</button>
                    </div>
                    <div class="brand-voice-preview" id="brand-voice-display">
                        <span class="badge-voice">Professional</span>
                    </div>
                    <p class="brand-desc-preview" id="brand-desc-display">
                        No product info set.
                    </p>
                    <div class="brand-progress">
                        <label>Profile Strength</label>
                        <div class="progress-bar-bg">
                            <div class="progress-bar-fill" id="brand-strength" style="width: 20%;"></div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="actions-card glass-panel">
                    <h3>Quick Actions</h3>
                    <div class="action-list">
                        <button class="action-item" onclick="openAudienceManager()">
                            <div class="icon-box p-green">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                                </svg>
                            </div>
                            <span>Manage Audience</span>
                        </button>
                        <button class="action-item" onclick="triggerTestAd()">
                            <div class="icon-box p-yellow">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                    <path
                                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                                </svg>
                            </div>
                            <span>Test Ad Generation</span>
                        </button>
                    </div>
                </div>
            </aside>
        </div>

        <!-- OVERLAYS / MODALS -->

        <!-- 1. Campaign Wizard Overlay -->
        <div id="campaign-wizard-overlay" class="modal-overlay">
            <div class="glass-modal large-modal">
                <div class="modal-header">
                    <h2>Create New Campaign</h2>
                    <button class="btn-close" onclick="closeCampaignWizard()">√ó</button>
                </div>
                <div class="modal-body">
                    <!-- Step Indicator -->
                    <div class="step-indicator">
                        <div class="step active">
                            <div class="step-number">1</div>
                            <div class="step-label">Details</div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-label">Schedule</div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-label">Review</div>
                        </div>
                    </div>

                    <input type="hidden" id="mini-camp-id">
                    <div class="form-group">
                        <label>Campaign Name</label>
                        <input type="text" id="mini-camp-name" placeholder="e.g. Summer Sale" class="form-input">
                    </div>

                    <div class="form-row-2">
                        <div class="form-group">
                            <label>Morning</label>
                            <input type="time" id="mini-time-m" value="09:00" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Afternoon</label>
                            <input type="time" id="mini-time-a" value="14:00" class="form-input">
                        </div>
                        <div class="form-group">
                            <label>Evening</label>
                            <input type="time" id="mini-time-e" value="19:00" class="form-input">
                        </div>
                    </div>
                </div>
                <div class="wizard-container">
                    <div class="wizard-steps-nav">
                        <div class="step-nav-item active" data-step="1">1. Details</div>
                        <div class="step-nav-item" data-step="2">2. Timing</div>
                        <div class="step-nav-item" data-step="3">3. Audience</div>
                        <div class="step-nav-item" data-step="4">4. Review</div>
                    </div>

                    <div class="wizard-content">
                        <!-- Step 1: Basics -->
                        <div class="wizard-step active" id="wizard-step-1">
                            <div class="form-group">
                                <label>Campaign Name</label>
                                <input type="text" id="wiz-name" placeholder="e.g. Weekly Flash Sale">
                            </div>
                            <div class="form-group checkbox-group">
                                <input type="checkbox" id="wiz-use-custom" onchange="toggleWizCustom(this)">
                                <label for="wiz-use-custom">Overrride Global Business Profile</label>
                            </div>
                            <div id="wiz-custom-profile" class="slide-down-panel" style="display:none;">
                                <div class="form-group">
                                    <input type="text" id="wiz-product" placeholder="Specific Product Info">
                                </div>
                                <div class="form-group">
                                    <input type="text" id="wiz-audience" placeholder="Specific Audience">
                                </div>
                            </div>
                        </div>

                        <!-- Step 2: Time -->
                        <div class="wizard-step" id="wizard-step-2">
                            <div class="time-grid">
                                <div class="time-input">
                                    <span>Morning</span>
                                    <input type="time" id="wiz-time-morning" value="07:00">
                                </div>
                                <div class="time-input">
                                    <span>Afternoon</span>
                                    <input type="time" id="wiz-time-afternoon" value="13:00">
                                </div>
                                <div class="time-input">
                                    <span>Evening</span>
                                    <input type="time" id="wiz-time-evening" value="19:00">
                                </div>
                            </div>
                        </div>

                        <!-- Step 3: Audience (Target Groups) -->
                        <div class="wizard-step" id="wizard-step-3">
                            <div id="wiz-groups-list" class="selectable-list">
                                <p>Loading groups...</p>
                            </div>
                        </div>

                        <!-- Step 4: Review -->
                        <div class="wizard-step" id="wizard-step-4">
                            <div class="review-card">
                                <h3 id="review-name">Campaign Name</h3>
                                <p id="review-schedule">Schedule: 7am, 1pm, 7pm</p>
                                <p id="review-groups">Targeting: All Groups</p>
                            </div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button class="btn-text" id="wiz-prev-btn" onclick="wizardBack()"
                            style="visibility:hidden">Back</button>
                        <button class="btn-primary" id="wiz-next-btn" onclick="wizardNext()">Next</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. Audience Manager Overlay -->
        <div id="audience-manager-overlay" class="modal-overlay">
            <div class="glass-modal">
                <div class="modal-header">
                    <h2>Audience Groups</h2>
                    <button class="btn-close" onclick="closeAudienceManager()">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="toolbar">
                        <button class="btn-secondary" onclick="refreshGroups()">Refresh WhatsApp Groups</button>
                    </div>
                    <div id="audience-list-full" class="full-list-view">
                        <!-- Full list populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. Brand Profile Modal -->
        <div id="brand-profile-modal" class="modal-overlay">
            <div class="glass-modal medium-modal">
                <div class="modal-header">
                    <h2>Edit Global Brand Profile</h2>
                    <button class="btn-close" onclick="closeBrandProfile()">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Product/Service</label>
                        <textarea id="modal-brand-product" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Target Audience</label>
                        <textarea id="modal-brand-audience" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label>USP</label>
                        <textarea id="modal-brand-usp" rows="2"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Brand Voice</label>
                        <select id="modal-brand-voice">
                            <option value="professional">Professional</option>
                            <option value="friendly">Friendly</option>
                            <option value="luxury">Luxury</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-primary" onclick="saveBrandProfileFromModal()">Save Profile</button>
                </div>
            </div>
        </div>

    </div>
    </main>
    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
        <a href="#" class="mobile-nav-item active" data-page="dashboard">
            <div class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" />
                </svg>
            </div>
            <span>Home</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="chats">
            <div class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z" />
                </svg>
                <span class="mobile-badge" id="mobile-chat-count" style="display: none;">0</span>
            </div>
            <span>Chats</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="contacts">
            <div class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z" />
                </svg>
            </div>
            <span>People</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="marketing">
            <div class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zm6-4a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zm6-3a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />
                </svg>
            </div>
            <span>Market</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="communities">
            <div class="nav-icon">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
            </div>
            <span>Groups</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="ai-profile">
            <div class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M13 7H7v6h6V7z" />
                    <path fill-rule="evenodd"
                        d="M7 2a1 1 0 012 0v1h2V2a1 1 0 112 0v1h2a2 2 0 012 2v2h1a1 1 0 110 2h-1v2h1a1 1 0 110 2h-1v2a2 2 0 01-2 2h-2v1a1 1 0 11-2 0v-1H9v1a1 1 0 11-2 0v-1H5a2 2 0 01-2-2v-2H2a1 1 0 110-2h1V9H2a1 1 0 010-2h1V5a2 2 0 012-2h2V2zM5 5h10v10H5V5z"
                        clip-rule="evenodd" />
                </svg>
            </div>
            <span>AI</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="user-profile">
            <div class="nav-icon">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"
                        clip-rule="evenodd" />
                </svg>
            </div>
            <span>Me</span>
        </a>
        <a href="#" class="mobile-nav-item" data-page="settings">
            <div class="nav-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M19.43 12.98c.04-.32.07-.64.07-98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.5.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z" />
                </svg>
            </div>
            <span>Settings</span>
        </a>
    </nav>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <script src="/app.js"></script>
</body>

</html>